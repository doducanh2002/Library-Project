2025-06-27T10:20:55.425+07:00  INFO 8056 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 8056 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T10:20:55.427+07:00 DEBUG 8056 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T10:20:55.429+07:00  INFO 8056 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T10:20:58.433+07:00  INFO 8056 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T10:20:58.439+07:00  INFO 8056 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T10:20:58.502+07:00  INFO 8056 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
2025-06-27T10:20:58.931+07:00  INFO 8056 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T10:21:00.049+07:00  INFO 8056 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 5156d9fb-e78d-482b-bdf8-8e18de63de0d

2025-06-27T10:21:03.098+07:00  INFO 8056 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T10:21:03.454+07:00 DEBUG 8056 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/videos/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=50MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/videos/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T10:21:03.515+07:00  WARN 8056 --- [api-gateway] [main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'routeDefinitionRouteLocator' defined in class path resource [org/springframework/cloud/gateway/config/GatewayAutoConfiguration.class]: Unsatisfied dependency expressed through method 'routeDefinitionRouteLocator' parameter 1: Error creating bean with name 'requestRateLimiterGatewayFilterFactory' defined in class path resource [org/springframework/cloud/gateway/config/GatewayAutoConfiguration.class]: Unsatisfied dependency expressed through method 'requestRateLimiterGatewayFilterFactory' parameter 1: No qualifying bean of type 'org.springframework.cloud.gateway.filter.ratelimit.KeyResolver' available: expected single matching bean but found 2: userKeyResolver,ipKeyResolver
2025-06-27T10:21:03.573+07:00  INFO 8056 --- [api-gateway] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-27T10:21:03.604+07:00 ERROR 8056 --- [api-gateway] [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of method requestRateLimiterGatewayFilterFactory in org.springframework.cloud.gateway.config.GatewayAutoConfiguration required a single bean, but 2 were found:
	- userKeyResolver: defined by method 'userKeyResolver' in class path resource [com/library/gateway/config/RateLimitConfig.class]
	- ipKeyResolver: defined by method 'ipKeyResolver' in class path resource [com/library/gateway/config/RateLimitConfig.class]

This may be due to missing parameter name information

Action:

Consider marking one of the beans as @Primary, updating the consumer to accept multiple beans, or using @Qualifier to identify the bean that should be consumed

Ensure that your compiler is configured to use the '-parameters' flag.
You may need to update both your build tool settings as well as your IDE.
(See https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x#parameter-name-retention)


2025-06-27T10:41:23.984+07:00  INFO 11564 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 11564 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T10:41:23.987+07:00 DEBUG 11564 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T10:41:23.988+07:00  INFO 11564 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T10:41:25.973+07:00  INFO 11564 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T10:41:25.978+07:00  INFO 11564 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T10:41:26.038+07:00  INFO 11564 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
2025-06-27T10:41:26.380+07:00  INFO 11564 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T10:41:27.284+07:00  INFO 11564 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: bdb08253-bcd1-4686-b201-bd72c12a5e07

2025-06-27T10:41:29.766+07:00  INFO 11564 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T10:41:31.274+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/videos/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=50MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/videos/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T10:41:31.543+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T10:41:31.543+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T10:41:31.543+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T10:41:31.544+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T10:41:31.544+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T10:41:31.544+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T10:41:31.544+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T10:41:31.544+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T10:41:31.544+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T10:41:31.544+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T10:41:31.544+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T10:41:31.544+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T10:41:31.545+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T10:41:31.545+07:00  INFO 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T10:41:33.598+07:00  INFO 11564 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T10:41:33.680+07:00  INFO 11564 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T10:41:34.479+07:00  INFO 11564 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T10:41:35.786+07:00  INFO 11564 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T10:41:37.074+07:00  INFO 11564 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T10:41:37.120+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T10:41:37.146+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T10:41:37.156+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:41:37.169+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:41:37.245+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T10:41:37.253+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T10:41:37.254+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T10:41:37.256+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T10:41:37.264+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:41:37.266+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:41:37.270+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T10:41:37.273+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T10:41:37.274+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T10:41:37.277+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:41:37.279+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:41:37.284+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T10:41:37.306+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T10:41:37.307+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T10:41:37.310+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T10:41:37.314+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:41:37.318+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:41:37.323+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T10:41:37.324+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T10:41:37.327+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T10:41:37.329+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:41:37.335+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:41:37.351+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T10:41:37.356+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T10:41:37.361+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T10:41:37.383+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:41:37.401+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:41:37.420+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T10:41:37.425+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T10:41:37.440+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T10:41:37.446+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:41:37.458+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:41:37.466+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T10:41:37.467+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T10:41:37.468+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:41:37.470+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:41:37.473+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T10:41:37.474+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T10:41:37.478+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T10:41:37.478+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/videos/upload} to Path
2025-06-27T10:41:37.479+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T10:41:37.481+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:41:37.482+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:41:37.487+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T10:41:37.488+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=50MB} to RequestSize
2025-06-27T10:41:37.514+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T10:41:37.515+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/videos/**} to Path
2025-06-27T10:41:37.519+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:41:37.523+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:41:37.527+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T10:41:37.529+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T10:41:37.546+07:00 DEBUG 11564 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T10:41:37.553+07:00  INFO 11564 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 16.411 seconds (process running for 17.692)
2025-06-27T10:44:27.712+07:00 DEBUG 11564 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T10:44:27.714+07:00 DEBUG 11564 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T10:44:27.715+07:00 DEBUG 11564 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [3a331c2d-1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T10:44:27.782+07:00 ERROR 11564 --- [api-gateway] [parallel-1] a.w.r.e.AbstractErrorWebExceptionHandler : [3a331c2d-1]  500 Server Error for HTTP POST "/api/v1/auth/login"

java.lang.IllegalArgumentException: When allowCredentials is true, allowedOrigins cannot contain the special value "*" since that cannot be set on the "Access-Control-Allow-Origin" response header. To allow credentials to a set of origins, list them explicitly or consider using "allowedOriginPatterns" instead.
	at org.springframework.web.cors.CorsConfiguration.validateAllowCredentials(CorsConfiguration.java:572) ~[spring-web-6.1.6.jar:6.1.6]
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ AuthorizationWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ ExceptionTranslationWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ LogoutWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ ServerRequestCacheWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ ReactorContextWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ CorsWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ HttpHeaderWriterWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]
	*__checkpoint ⇢ HTTP POST "/api/v1/auth/login" [ExceptionHandlingWebHandler]
Original Stack Trace:
		at org.springframework.web.cors.CorsConfiguration.validateAllowCredentials(CorsConfiguration.java:572) ~[spring-web-6.1.6.jar:6.1.6]
		at org.springframework.web.reactive.handler.AbstractHandlerMapping.lambda$getHandler$1(AbstractHandlerMapping.java:198) ~[spring-webflux-6.1.6.jar:6.1.6]
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:259) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:865) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.onNext(MonoFilterWhen.java:136) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.request(MonoFilterWhen.java:183) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:339) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:339) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onComplete(MonoPeekTerminal.java:299) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onComplete(MonoPeekTerminal.java:299) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:155) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilter$FilterSubscriber.onNext(FluxFilter.java:113) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:503) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:259) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:865) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onNext(FluxFilterFuseable.java:118) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.request(FluxFilterFuseable.java:191) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onSubscribe(FluxFilterFuseable.java:87) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onNext(FluxConcatMapNoPrefetch.java:207) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerComplete(FluxConcatMapNoPrefetch.java:275) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onComplete(FluxConcatMap.java:889) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:85) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2573) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFlatMap$FlatMapMain.checkTerminated(FluxFlatMap.java:850) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFlatMap$FlatMapMain.drainLoop(FluxFlatMap.java:612) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFlatMap$FlatMapMain.drain(FluxFlatMap.java:592) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFlatMap$FlatMapMain.request(FluxFlatMap.java:349) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilter$FilterSubscriber.request(FluxFilter.java:186) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.request(FluxPeekFuseable.java:783) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilter$FilterSubscriber.request(FluxFilter.java:186) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:339) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.request(FluxDefaultIfEmpty.java:98) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.request(FluxPeekFuseable.java:437) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilter$FilterSubscriber.request(FluxFilter.java:186) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilter$FilterSubscriber.onSubscribe(FluxFilter.java:85) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onSubscribe(MonoPeekTerminal.java:152) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onSubscribe(FluxPeekFuseable.java:471) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onSubscribe(MonoPeekTerminal.java:152) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.onSubscribe(Operators.java:2051) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:85) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2573) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFlatMap$FlatMapMain.checkTerminated(FluxFlatMap.java:850) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFlatMap$FlatMapMain.drainLoop(FluxFlatMap.java:612) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFlatMap$FlatMapMain.drain(FluxFlatMap.java:592) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFlatMap$FlatMapMain.onComplete(FluxFlatMap.java:469) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:357) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.request(FluxPeekFuseable.java:144) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:373) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onSubscribe(FluxPeekFuseable.java:178) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2097) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:134) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onComplete(FluxMap.java:275) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1866) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.signalCached(MonoCacheTime.java:337) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.onNext(MonoCacheTime.java:354) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.publisher.MonoPublishOn$PublishOnSubscriber.run(MonoPublishOn.java:181) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.6.5.jar:3.6.5]
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.6.5.jar:3.6.5]
		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
		at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
		at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-06-27T10:47:42.373+07:00  INFO 11648 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 11648 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T10:47:42.378+07:00 DEBUG 11648 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T10:47:42.380+07:00  INFO 11648 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T10:47:45.272+07:00  INFO 11648 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T10:47:45.276+07:00  INFO 11648 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T10:47:45.335+07:00  INFO 11648 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 30 ms. Found 0 Redis repository interfaces.
2025-06-27T10:47:45.695+07:00  INFO 11648 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T10:47:46.533+07:00  INFO 11648 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 02afc5e4-2438-401b-86fa-4b68e6224f2c

2025-06-27T10:47:49.473+07:00  INFO 11648 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T10:47:50.009+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/videos/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=50MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/videos/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T10:47:50.279+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T10:47:50.279+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T10:47:50.279+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T10:47:50.280+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T10:47:50.280+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T10:47:50.280+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T10:47:50.280+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T10:47:50.280+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T10:47:50.280+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T10:47:50.280+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T10:47:50.280+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T10:47:50.280+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T10:47:50.280+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T10:47:50.280+07:00  INFO 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T10:47:51.838+07:00  INFO 11648 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T10:47:51.916+07:00  INFO 11648 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T10:47:52.568+07:00  INFO 11648 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T10:47:53.804+07:00  INFO 11648 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T10:47:55.105+07:00  INFO 11648 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T10:47:55.200+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T10:47:55.222+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T10:47:55.231+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:47:55.245+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:47:55.296+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T10:47:55.299+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T10:47:55.299+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T10:47:55.301+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T10:47:55.303+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:47:55.304+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:47:55.307+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T10:47:55.311+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T10:47:55.312+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T10:47:55.313+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:47:55.314+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:47:55.317+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T10:47:55.320+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T10:47:55.320+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T10:47:55.323+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T10:47:55.325+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:47:55.327+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:47:55.331+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T10:47:55.331+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T10:47:55.334+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T10:47:55.337+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:47:55.340+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:47:55.345+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T10:47:55.346+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T10:47:55.347+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T10:47:55.348+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:47:55.349+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:47:55.354+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T10:47:55.355+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T10:47:55.357+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T10:47:55.359+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:47:55.360+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:47:55.365+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T10:47:55.365+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T10:47:55.367+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:47:55.369+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:47:55.375+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T10:47:55.376+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T10:47:55.379+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T10:47:55.380+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/videos/upload} to Path
2025-06-27T10:47:55.382+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T10:47:55.385+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:47:55.387+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:47:55.395+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T10:47:55.397+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=50MB} to RequestSize
2025-06-27T10:47:55.420+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T10:47:55.421+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/videos/**} to Path
2025-06-27T10:47:55.425+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T10:47:55.428+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T10:47:55.434+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T10:47:55.436+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T10:47:55.446+07:00 DEBUG 11648 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T10:47:55.451+07:00  INFO 11648 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 17.005 seconds (process running for 17.833)
2025-06-27T10:49:38.001+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T10:49:38.004+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T10:49:38.005+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [637604c6-1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@260b9506
2025-06-27T10:49:38.009+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@25d9291a}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1029cf9}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@5abbb273}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@5a7a6d34}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@70d687b8}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@445058e8}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@6533629}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@36871e98}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@7b1c501d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5d5574c7}, order = 2147483647]]
2025-06-27T10:49:38.068+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"8ee641d3-2b4e-4731-9d95-e83301af6beb", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"64", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:49:38.081+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0028712, duration(nanos)=2871200.0, startTimeNanos=10063807343100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@14531072'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@30060bba} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"8ee641d3-2b4e-4731-9d95-e83301af6beb", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"64", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:49:38.554+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T10:49:38.555+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.4773977, duration(nanos)=4.773977E8, startTimeNanos=10063807343100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@14531072'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@30060bba}
2025-06-27T10:50:00.377+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T10:50:00.378+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/register] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T10:50:00.378+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [637604c6-2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@260b9506
2025-06-27T10:50:00.379+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@25d9291a}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1029cf9}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@5abbb273}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@5a7a6d34}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@70d687b8}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@445058e8}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@6533629}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@36871e98}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@7b1c501d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5d5574c7}, order = 2147483647]]
2025-06-27T10:50:00.380+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"45005380-b140-4fed-ac94-c5f04219eb47", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"128", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:00.381+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.173E-4, duration(nanos)=117300.0, startTimeNanos=10086111033900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@67003872'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@69c7cae2} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"45005380-b140-4fed-ac94-c5f04219eb47", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"128", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:00.405+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T10:50:00.406+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0252021, duration(nanos)=2.52021E7, startTimeNanos=10086111033900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@67003872'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@69c7cae2}
2025-06-27T10:50:00.463+07:00 DEBUG 11648 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T10:50:00.464+07:00 DEBUG 11648 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/sendotp] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T10:50:00.464+07:00 DEBUG 11648 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [637604c6-3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@260b9506
2025-06-27T10:50:00.464+07:00 DEBUG 11648 --- [api-gateway] [parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@25d9291a}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1029cf9}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@5abbb273}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@5a7a6d34}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@70d687b8}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@445058e8}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@6533629}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@36871e98}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@7b1c501d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5d5574c7}, order = 2147483647]]
2025-06-27T10:50:00.465+07:00 DEBUG 11648 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"914bb376-4754-4b22-8dd3-c7316570e5e9", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"64", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:00.465+07:00 DEBUG 11648 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.125E-4, duration(nanos)=112500.0, startTimeNanos=10086195177300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1ba585ca'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@156268ce} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"914bb376-4754-4b22-8dd3-c7316570e5e9", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"64", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:00.473+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T10:50:00.474+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0088777, duration(nanos)=8877700.0, startTimeNanos=10086195177300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1ba585ca'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@156268ce}
2025-06-27T10:50:00.772+07:00 DEBUG 11648 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T10:50:00.773+07:00 DEBUG 11648 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/active] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T10:50:00.773+07:00 DEBUG 11648 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [637604c6-4] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@260b9506
2025-06-27T10:50:00.773+07:00 DEBUG 11648 --- [api-gateway] [parallel-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@25d9291a}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1029cf9}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@5abbb273}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@5a7a6d34}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@70d687b8}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@445058e8}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@6533629}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@36871e98}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@7b1c501d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5d5574c7}, order = 2147483647]]
2025-06-27T10:50:00.777+07:00 DEBUG 11648 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"208a0d7c-830f-4f06-bad4-ba65a0277d1a", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"88", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:00.780+07:00 DEBUG 11648 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/active'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0012662, duration(nanos)=1266200.0, startTimeNanos=10086507530000}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1c937e4c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@125493ae} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"208a0d7c-830f-4f06-bad4-ba65a0277d1a", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"88", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:00.793+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T10:50:00.794+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/active'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0156962, duration(nanos)=1.56962E7, startTimeNanos=10086507530000}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1c937e4c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@125493ae}
2025-06-27T10:50:01.020+07:00 DEBUG 11648 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T10:50:01.020+07:00 DEBUG 11648 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T10:50:01.020+07:00 DEBUG 11648 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [637604c6-5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@260b9506
2025-06-27T10:50:01.021+07:00 DEBUG 11648 --- [api-gateway] [parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@25d9291a}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1029cf9}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@5abbb273}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@5a7a6d34}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@70d687b8}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@445058e8}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@6533629}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@36871e98}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@7b1c501d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5d5574c7}, order = 2147483647]]
2025-06-27T10:50:01.022+07:00 DEBUG 11648 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"c33a4eff-2603-4669-986f-72cdce8e96ab", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"88", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:01.039+07:00 DEBUG 11648 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0148647, duration(nanos)=1.48647E7, startTimeNanos=10086752988500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@44563893'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4a91de69} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"c33a4eff-2603-4669-986f-72cdce8e96ab", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"88", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:01.076+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T10:50:01.076+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0530092, duration(nanos)=5.30092E7, startTimeNanos=10086752988500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@44563893'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4a91de69}
2025-06-27T10:50:01.524+07:00 DEBUG 11648 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T10:50:01.524+07:00 DEBUG 11648 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/change-password] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T10:50:01.525+07:00 DEBUG 11648 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [637604c6-8] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@260b9506
2025-06-27T10:50:01.525+07:00 DEBUG 11648 --- [api-gateway] [parallel-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@25d9291a}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1029cf9}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@5abbb273}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@5a7a6d34}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@70d687b8}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@445058e8}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@6533629}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@36871e98}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@7b1c501d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5d5574c7}, order = 2147483647]]
2025-06-27T10:50:01.525+07:00 DEBUG 11648 --- [api-gateway] [parallel-8] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", Authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImMzOTc1ZjM1LTE3NzUtNDY0OC05ZDRmLWM0YzVkZmY4MzZjMiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NDYzNjg3OTQsImV4cCI6MTc0NjM2OTY5NH0.CrX3SeJ0YADuSipqSuEqfAYCFeTjS4bWuGx3kv35iGJSoidBgNw9kNmb4nr5UYZGIzyxrdkNpif15KXv7YPwjmlNNEypDSRw_aBVZ4oFCbo7bJ2TmxZHghhnk65N7GrAW9ne5e5redeFSpb6NRETf2v_uzUHPy_sDBpl_4MDvPHJoyBM0g1trUVV0ejL35ZlfcaBkWi4ZCZYfkcpKOvqyO48geA1uAE9K0TSLM31SBd9HxVEx6D_azL1UvQS7UXkBiK-Fm7G9XePJfB_HM40a5dnET3mtNo4VRj1_uFff4DywZrj-qS_wK4jp48pLEQpddyOVSubNDJk-HwIOhOSNA", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"a5446f8d-321f-4640-a7e3-aa5432a00038", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"128", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:01.526+07:00 DEBUG 11648 --- [api-gateway] [parallel-8] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.55E-4, duration(nanos)=155000.0, startTimeNanos=10087255341400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@15a75629'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@1b60aaed} created for the request. New headers are [Content-Type:"application/json", Authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImMzOTc1ZjM1LTE3NzUtNDY0OC05ZDRmLWM0YzVkZmY4MzZjMiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NDYzNjg3OTQsImV4cCI6MTc0NjM2OTY5NH0.CrX3SeJ0YADuSipqSuEqfAYCFeTjS4bWuGx3kv35iGJSoidBgNw9kNmb4nr5UYZGIzyxrdkNpif15KXv7YPwjmlNNEypDSRw_aBVZ4oFCbo7bJ2TmxZHghhnk65N7GrAW9ne5e5redeFSpb6NRETf2v_uzUHPy_sDBpl_4MDvPHJoyBM0g1trUVV0ejL35ZlfcaBkWi4ZCZYfkcpKOvqyO48geA1uAE9K0TSLM31SBd9HxVEx6D_azL1UvQS7UXkBiK-Fm7G9XePJfB_HM40a5dnET3mtNo4VRj1_uFff4DywZrj-qS_wK4jp48pLEQpddyOVSubNDJk-HwIOhOSNA", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"a5446f8d-321f-4640-a7e3-aa5432a00038", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"128", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:01.724+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T10:50:01.725+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.1991306, duration(nanos)=1.991306E8, startTimeNanos=10087255341400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@15a75629'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@1b60aaed}
2025-06-27T10:50:01.769+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T10:50:01.770+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/forgot-password] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T10:50:01.770+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [637604c6-9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@260b9506
2025-06-27T10:50:01.771+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@25d9291a}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1029cf9}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@5abbb273}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@5a7a6d34}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@70d687b8}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@445058e8}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@6533629}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@36871e98}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@7b1c501d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5d5574c7}, order = 2147483647]]
2025-06-27T10:50:01.775+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", Authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjZiZjdmMDcyLTE4NTAtNGUyNS04ODU4LTNhMDc5NTM3N2I0ZCJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NDUxNTc3NTMsImV4cCI6MTc0NTE1ODY1M30.BbXgFs4siMqz-XNGxoHTKy2NcokrkMbmjEc9MmVaFmb7hQH-__DkJ8kM9trHkDtfzFsGE0tNbW70Vyl5kuxP1VaxrmL2nGukdpbbiIDN72pnx2avT1IKBKycfmYLO4ehGBFVx8VuhFc96bWdB6lpGklo_AyWOFIFoie0Up9Niaq8hk9jK0YuPeIK5WxJqTXhluhOwGJxlzqjJqd7avsd33I7EYMWB-O7Lo0HjFZ_v5Ff6odOYqGgOJCN9ZiPRpGDjwqKgwUuPkIxPl9Nldd6m7sxPFZFFLDEpFhbFFbgT0CLeilB6lWRQ3ehk5rWBq0E6dW20j1bAcczwqNhBO2d-w", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"df008634-ea42-428a-acf1-51c8b4d21657", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"64", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:01.777+07:00 DEBUG 11648 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/forgot-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=4.951E-4, duration(nanos)=495100.0, startTimeNanos=10087505877300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@536f4f8d'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@69d40684} created for the request. New headers are [Content-Type:"application/json", Authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjZiZjdmMDcyLTE4NTAtNGUyNS04ODU4LTNhMDc5NTM3N2I0ZCJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NDUxNTc3NTMsImV4cCI6MTc0NTE1ODY1M30.BbXgFs4siMqz-XNGxoHTKy2NcokrkMbmjEc9MmVaFmb7hQH-__DkJ8kM9trHkDtfzFsGE0tNbW70Vyl5kuxP1VaxrmL2nGukdpbbiIDN72pnx2avT1IKBKycfmYLO4ehGBFVx8VuhFc96bWdB6lpGklo_AyWOFIFoie0Up9Niaq8hk9jK0YuPeIK5WxJqTXhluhOwGJxlzqjJqd7avsd33I7EYMWB-O7Lo0HjFZ_v5Ff6odOYqGgOJCN9ZiPRpGDjwqKgwUuPkIxPl9Nldd6m7sxPFZFFLDEpFhbFFbgT0CLeilB6lWRQ3ehk5rWBq0E6dW20j1bAcczwqNhBO2d-w", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"df008634-ea42-428a-acf1-51c8b4d21657", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"64", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:01.797+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T10:50:01.798+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/forgot-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0214774, duration(nanos)=2.14774E7, startTimeNanos=10087505877300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@536f4f8d'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@69d40684}
2025-06-27T10:50:01.868+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T10:50:01.868+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/reset-password] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T10:50:01.868+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [637604c6-10] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@260b9506
2025-06-27T10:50:01.868+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@25d9291a}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1029cf9}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@5abbb273}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@5a7a6d34}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@70d687b8}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@445058e8}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@6533629}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@36871e98}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@7b1c501d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@5d5574c7}, order = 2147483647]]
2025-06-27T10:50:01.869+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", Authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjZiZjdmMDcyLTE4NTAtNGUyNS04ODU4LTNhMDc5NTM3N2I0ZCJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NDUxNTc3NTMsImV4cCI6MTc0NTE1ODY1M30.BbXgFs4siMqz-XNGxoHTKy2NcokrkMbmjEc9MmVaFmb7hQH-__DkJ8kM9trHkDtfzFsGE0tNbW70Vyl5kuxP1VaxrmL2nGukdpbbiIDN72pnx2avT1IKBKycfmYLO4ehGBFVx8VuhFc96bWdB6lpGklo_AyWOFIFoie0Up9Niaq8hk9jK0YuPeIK5WxJqTXhluhOwGJxlzqjJqd7avsd33I7EYMWB-O7Lo0HjFZ_v5Ff6odOYqGgOJCN9ZiPRpGDjwqKgwUuPkIxPl9Nldd6m7sxPFZFFLDEpFhbFFbgT0CLeilB6lWRQ3ehk5rWBq0E6dW20j1bAcczwqNhBO2d-w", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"1c7a441e-a1c4-49f6-bbe1-daf42c07b6f6", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"152", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:01.870+07:00 DEBUG 11648 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/reset-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.385E-4, duration(nanos)=138500.0, startTimeNanos=10087599017700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@28fac0d9'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4e5fbe1c} created for the request. New headers are [Content-Type:"application/json", Authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjZiZjdmMDcyLTE4NTAtNGUyNS04ODU4LTNhMDc5NTM3N2I0ZCJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NDUxNTc3NTMsImV4cCI6MTc0NTE1ODY1M30.BbXgFs4siMqz-XNGxoHTKy2NcokrkMbmjEc9MmVaFmb7hQH-__DkJ8kM9trHkDtfzFsGE0tNbW70Vyl5kuxP1VaxrmL2nGukdpbbiIDN72pnx2avT1IKBKycfmYLO4ehGBFVx8VuhFc96bWdB6lpGklo_AyWOFIFoie0Up9Niaq8hk9jK0YuPeIK5WxJqTXhluhOwGJxlzqjJqd7avsd33I7EYMWB-O7Lo0HjFZ_v5Ff6odOYqGgOJCN9ZiPRpGDjwqKgwUuPkIxPl9Nldd6m7sxPFZFFLDEpFhbFFbgT0CLeilB6lWRQ3ehk5rWBq0E6dW20j1bAcczwqNhBO2d-w", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"1c7a441e-a1c4-49f6-bbe1-daf42c07b6f6", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"152", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64947"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T10:50:01.881+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T10:50:01.882+07:00 DEBUG 11648 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/reset-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0127348, duration(nanos)=1.27348E7, startTimeNanos=10087599017700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@28fac0d9'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4e5fbe1c}
2025-06-27T14:20:08.448+07:00  INFO 20784 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 20784 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T14:20:08.451+07:00 DEBUG 20784 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T14:20:08.452+07:00  INFO 20784 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T14:20:10.510+07:00  INFO 20784 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T14:20:10.514+07:00  INFO 20784 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T14:20:10.584+07:00  INFO 20784 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
2025-06-27T14:20:10.958+07:00  INFO 20784 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T14:20:11.730+07:00  INFO 20784 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 82f52ac1-ad91-47fc-bcf0-21422db2b1a9

2025-06-27T14:20:14.447+07:00  INFO 20784 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:20:14.844+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T14:20:14.984+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T14:20:14.985+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T14:20:14.985+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T14:20:14.985+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T14:20:14.985+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T14:20:14.985+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T14:20:14.985+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T14:20:14.985+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T14:20:14.985+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T14:20:14.985+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T14:20:14.986+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T14:20:14.986+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T14:20:14.986+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T14:20:14.986+07:00  INFO 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T14:20:16.530+07:00  INFO 20784 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:20:16.625+07:00  INFO 20784 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T14:20:17.341+07:00  INFO 20784 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T14:20:18.621+07:00  INFO 20784 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:20:19.927+07:00  INFO 20784 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:20:19.980+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T14:20:20.018+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T14:20:20.028+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:20:20.044+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:20:20.109+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T14:20:20.114+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T14:20:20.114+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T14:20:20.116+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T14:20:20.119+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:20:20.120+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:20:20.123+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T14:20:20.126+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T14:20:20.126+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T14:20:20.127+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:20:20.128+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:20:20.130+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T14:20:20.134+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T14:20:20.134+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T14:20:20.136+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T14:20:20.138+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:20:20.140+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:20:20.144+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T14:20:20.144+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T14:20:20.147+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T14:20:20.149+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:20:20.153+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:20:20.172+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T14:20:20.174+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T14:20:20.178+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T14:20:20.185+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:20:20.188+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:20:20.193+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T14:20:20.194+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T14:20:20.195+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T14:20:20.198+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:20:20.201+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:20:20.205+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T14:20:20.206+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T14:20:20.213+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:20:20.220+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:20:20.225+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T14:20:20.226+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T14:20:20.231+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T14:20:20.231+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T14:20:20.232+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T14:20:20.236+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:20:20.238+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:20:20.241+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T14:20:20.243+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T14:20:20.252+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T14:20:20.252+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T14:20:20.254+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:20:20.256+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:20:20.259+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T14:20:20.260+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T14:20:20.274+07:00 DEBUG 20784 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T14:20:20.278+07:00  INFO 20784 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 14.132 seconds (process running for 19.538)
2025-06-27T14:21:03.218+07:00  INFO 1780 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 1780 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T14:21:03.221+07:00 DEBUG 1780 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T14:21:03.223+07:00  INFO 1780 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T14:21:05.662+07:00  INFO 1780 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T14:21:05.668+07:00  INFO 1780 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T14:21:05.756+07:00  INFO 1780 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 44 ms. Found 0 Redis repository interfaces.
2025-06-27T14:21:06.265+07:00  INFO 1780 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T14:21:07.173+07:00  INFO 1780 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 9faaf2e0-a833-46fb-96bc-9bc58484f8dc

2025-06-27T14:21:09.745+07:00  INFO 1780 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:21:10.153+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T14:21:10.257+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T14:21:10.258+07:00  INFO 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T14:21:11.762+07:00  INFO 1780 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:21:11.873+07:00  INFO 1780 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T14:21:12.552+07:00  INFO 1780 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T14:21:13.828+07:00  INFO 1780 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:21:15.084+07:00  INFO 1780 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:21:15.130+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T14:21:15.160+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T14:21:15.170+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:21:15.184+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:21:15.245+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T14:21:15.249+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T14:21:15.250+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T14:21:15.251+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T14:21:15.252+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:21:15.253+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:21:15.258+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T14:21:15.260+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T14:21:15.261+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T14:21:15.262+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:21:15.263+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:21:15.266+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T14:21:15.268+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T14:21:15.269+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T14:21:15.270+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T14:21:15.272+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:21:15.273+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:21:15.275+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T14:21:15.275+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T14:21:15.276+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T14:21:15.277+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:21:15.278+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:21:15.282+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T14:21:15.282+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T14:21:15.284+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T14:21:15.285+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:21:15.286+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:21:15.289+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T14:21:15.289+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T14:21:15.291+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T14:21:15.293+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:21:15.295+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:21:15.301+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T14:21:15.301+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T14:21:15.303+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:21:15.305+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:21:15.308+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T14:21:15.311+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T14:21:15.316+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T14:21:15.316+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T14:21:15.318+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T14:21:15.321+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:21:15.322+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:21:15.324+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T14:21:15.326+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T14:21:15.339+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T14:21:15.340+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T14:21:15.344+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:21:15.360+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:21:15.367+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T14:21:15.369+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T14:21:15.385+07:00 DEBUG 1780 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T14:21:15.391+07:00  INFO 1780 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 15.045 seconds (process running for 15.873)
2025-06-27T14:22:20.148+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T14:22:20.160+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:22:20.160+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [329a3a52-1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:22:20.163+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:22:20.210+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"2c32fc06-fe6e-469d-a609-558d3f06d4ff", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59236"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:22:20.219+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0024954, duration(nanos)=2495400.0, startTimeNanos=22825946664500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@45ce3090'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@63187a09} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"2c32fc06-fe6e-469d-a609-558d3f06d4ff", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59236"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:22:22.544+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:22:22.545+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.3276712, duration(nanos)=2.3276712E9, startTimeNanos=22825946664500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@45ce3090'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@63187a09}
2025-06-27T14:22:44.844+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T14:22:44.845+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/register] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:22:44.845+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [329a3a52-2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:22:44.845+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:22:44.847+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"e3ffbcb8-b7d8-4c43-af2e-5152334bbdf1", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59236"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:22:44.849+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=4.385E-4, duration(nanos)=438500.0, startTimeNanos=22850577717400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@71a11854'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7f66e810} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"e3ffbcb8-b7d8-4c43-af2e-5152334bbdf1", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59236"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:22:44.925+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-6] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:22:44.925+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-6] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0773692, duration(nanos)=7.73692E7, startTimeNanos=22850577717400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@71a11854'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7f66e810}
2025-06-27T14:23:34.942+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T14:23:34.943+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/register] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:23:34.943+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [329a3a52-3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:23:34.944+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:23:34.945+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"26560514-a94e-4221-8e93-cbddf1e09b20", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59236"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:23:34.947+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.039E-4, duration(nanos)=203900.0, startTimeNanos=22900675690100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@14a86292'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@1a6f8e77} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"26560514-a94e-4221-8e93-cbddf1e09b20", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59236"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:23:35.184+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:23:35.185+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.2386838, duration(nanos)=2.386838E8, startTimeNanos=22900675690100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@14a86292'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@1a6f8e77}
2025-06-27T14:24:06.514+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T14:24:06.514+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/sendotp] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:24:06.514+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [329a3a52-4] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:24:06.515+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:24:06.516+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"d2c718b8-0ba4-4107-ac07-5dfdad4cf914", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"45", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59236"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:24:06.516+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.438E-4, duration(nanos)=243800.0, startTimeNanos=22932245901100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@52463c53'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5c81c86b} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"d2c718b8-0ba4-4107-ac07-5dfdad4cf914", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"45", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59236"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:24:18.834+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:24:18.835+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=12.3185002, duration(nanos)=1.23185002E10, startTimeNanos=22932245901100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@52463c53'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5c81c86b}
2025-06-27T14:25:13.751+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T14:25:13.752+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/active] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:25:13.752+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [05f75109-5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:25:13.752+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:25:13.753+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"705fe317-6318-44dc-8a7c-3b1f6e948db9", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59302"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:25:13.754+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/active'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.207E-4, duration(nanos)=220700.0, startTimeNanos=22999483566500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@15782ced'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@1bbfc032} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"705fe317-6318-44dc-8a7c-3b1f6e948db9", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59302"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:25:13.825+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:25:13.825+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/active'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0718941, duration(nanos)=7.18941E7, startTimeNanos=22999483566500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@15782ced'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@1bbfc032}
2025-06-27T14:25:40.076+07:00 DEBUG 1780 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T14:25:40.076+07:00 DEBUG 1780 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload/] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:25:40.077+07:00 DEBUG 1780 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [05f75109-6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:25:40.077+07:00 DEBUG 1780 --- [api-gateway] [parallel-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:25:40.079+07:00 DEBUG 1780 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"e49c80ab-7f71-4a17-80db-6a4ce63000ae", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59302"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:25:40.080+07:00 DEBUG 1780 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.732E-4, duration(nanos)=173200.0, startTimeNanos=23025808947000}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2d85529c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@2342a95c} created for the request. New headers are [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"e49c80ab-7f71-4a17-80db-6a4ce63000ae", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59302"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:25:40.104+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:25:40.105+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0249255, duration(nanos)=2.49255E7, startTimeNanos=23025808947000}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2d85529c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@2342a95c}
2025-06-27T14:25:53.763+07:00 DEBUG 1780 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T14:25:53.764+07:00 DEBUG 1780 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload/] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:25:53.764+07:00 DEBUG 1780 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [05f75109-7] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:25:53.764+07:00 DEBUG 1780 --- [api-gateway] [parallel-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:25:53.765+07:00 DEBUG 1780 --- [api-gateway] [parallel-7] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"41a796b6-132f-4272-bdc3-0a18904224a5", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------892579691835970237580677", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59302"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:25:53.767+07:00 DEBUG 1780 --- [api-gateway] [parallel-7] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.347E-4, duration(nanos)=234700.0, startTimeNanos=23039495944100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3692ca66'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@385532c4} created for the request. New headers are [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"41a796b6-132f-4272-bdc3-0a18904224a5", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------892579691835970237580677", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59302"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:25:53.784+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:25:53.785+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0188667, duration(nanos)=1.88667E7, startTimeNanos=23039495944100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3692ca66'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@385532c4}
2025-06-27T14:26:29.297+07:00 DEBUG 1780 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T14:26:29.298+07:00 DEBUG 1780 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files//upload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:26:29.299+07:00 DEBUG 1780 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [05f75109-8] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:26:29.300+07:00 DEBUG 1780 --- [api-gateway] [parallel-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:26:29.302+07:00 DEBUG 1780 --- [api-gateway] [parallel-8] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"adf26827-9e9f-4258-ae16-53200de2e838", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------965395453965968324944197", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59302"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:26:29.303+07:00 DEBUG 1780 --- [api-gateway] [parallel-8] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files//upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.723E-4, duration(nanos)=272300.0, startTimeNanos=23075031577100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5ae9cde7'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@542e28ca} created for the request. New headers are [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"adf26827-9e9f-4258-ae16-53200de2e838", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------965395453965968324944197", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59302"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:26:29.362+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:26:29.363+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files//upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0611487, duration(nanos)=6.11487E7, startTimeNanos=23075031577100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5ae9cde7'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@542e28ca}
2025-06-27T14:26:52.256+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T14:26:52.257+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8080/api/v1/files/d7e30aa9-8d50-4aa0-845f-9c497a3e9b93.txt] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:26:52.258+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [05f75109-9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:26:52.258+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:26:52.259+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"5ab32178-47f1-4d9a-8cfb-b262570ca1d5", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59302"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:26:52.261+07:00 DEBUG 1780 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/d7e30aa9-8d50-4aa0-845f-9c497a3e9b93.txt'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=4.176E-4, duration(nanos)=417600.0, startTimeNanos=23097989968600}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@648f2bd'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@41f0bca0} created for the request. New headers are [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"5ab32178-47f1-4d9a-8cfb-b262570ca1d5", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59302"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:26:52.278+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:26:52.279+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/d7e30aa9-8d50-4aa0-845f-9c497a3e9b93.txt'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0182555, duration(nanos)=1.82555E7, startTimeNanos=23097989968600}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@648f2bd'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@41f0bca0}
2025-06-27T14:33:01.743+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T14:33:01.745+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files//upload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:33:01.746+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [0c76e758-10] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:33:01.747+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:33:01.749+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"cf2e6203-7d23-4810-b6bc-9722463deb70", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------939468964923730630668367", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59424"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:33:01.750+07:00 DEBUG 1780 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files//upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.645E-4, duration(nanos)=264500.0, startTimeNanos=23467479810200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7b597324'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3e5be22b} created for the request. New headers are [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"cf2e6203-7d23-4810-b6bc-9722463deb70", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------939468964923730630668367", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59424"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:33:01.790+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:33:01.791+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files//upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0400112, duration(nanos)=4.00112E7, startTimeNanos=23467479810200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7b597324'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3e5be22b}
2025-06-27T14:33:06.828+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T14:33:06.829+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:33:06.829+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [0c76e758-11] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:33:06.830+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:33:06.831+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"5104b9d3-ea26-4c15-ba6e-a52fb879d905", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------826718853542274082871644", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59424"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:33:06.833+07:00 DEBUG 1780 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.342E-4, duration(nanos)=234200.0, startTimeNanos=23472561379800}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1e5009e2'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5b52844c} created for the request. New headers are [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"5104b9d3-ea26-4c15-ba6e-a52fb879d905", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------826718853542274082871644", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59424"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:33:06.871+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:33:06.872+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0400429, duration(nanos)=4.00429E7, startTimeNanos=23472561379800}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1e5009e2'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5b52844c}
2025-06-27T14:33:10.648+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T14:33:10.648+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/sadsaupload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:33:10.648+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [0c76e758-12] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:33:10.649+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:33:10.650+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"740b0378-77a8-4fe9-8f65-3bf943f7a374", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------600464316662143630625105", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59424"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:33:10.651+07:00 DEBUG 1780 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/sadsaupload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.956E-4, duration(nanos)=295600.0, startTimeNanos=23476380203800}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1dbcc250'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7e7bd110} created for the request. New headers are [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"740b0378-77a8-4fe9-8f65-3bf943f7a374", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------600464316662143630625105", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59424"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:33:10.670+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:33:10.671+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/sadsaupload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.020255, duration(nanos)=2.0255E7, startTimeNanos=23476380203800}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1dbcc250'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7e7bd110}
2025-06-27T14:33:14.387+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T14:33:14.387+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:33:14.388+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [0c76e758-13] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@7459e2c
2025-06-27T14:33:14.388+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5ae66c98}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@56872fcb}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@459bf87c}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@23df7fad}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@2acca224}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@1aaf46e6}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7ac685ef}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4ab455e2}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1b444b5}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@391d28ea}, order = 2147483647]]
2025-06-27T14:33:14.389+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"30c61004-380d-4eb0-8f85-6a88fd806123", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------264792471011556278136021", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59424"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:33:14.389+07:00 DEBUG 1780 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.6E-5, duration(nanos)=86000.0, startTimeNanos=23480119071700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1f80479d'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5a82ca09} created for the request. New headers are [User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"30c61004-380d-4eb0-8f85-6a88fd806123", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Type:"multipart/form-data; boundary=--------------------------264792471011556278136021", Content-Length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59424"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:33:14.444+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-8] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:33:14.444+07:00 DEBUG 1780 --- [api-gateway] [reactor-http-nio-8] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0548555, duration(nanos)=5.48555E7, startTimeNanos=23480119071700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1f80479d'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5a82ca09}
2025-06-27T14:40:53.171+07:00  INFO 8140 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 8140 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T14:40:53.174+07:00 DEBUG 8140 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T14:40:53.175+07:00  INFO 8140 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T14:40:55.156+07:00  INFO 8140 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T14:40:55.160+07:00  INFO 8140 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T14:40:55.211+07:00  INFO 8140 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.
2025-06-27T14:40:55.624+07:00  INFO 8140 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T14:40:56.602+07:00  INFO 8140 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 3a6d2bef-9c60-4259-8086-d0e86bbf6bbc

2025-06-27T14:40:59.613+07:00  INFO 8140 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:40:59.988+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T14:41:00.213+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T14:41:00.214+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T14:41:00.219+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T14:41:00.220+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T14:41:00.220+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T14:41:00.220+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T14:41:00.220+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T14:41:00.220+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T14:41:00.221+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T14:41:00.221+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T14:41:00.221+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T14:41:00.221+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T14:41:00.222+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T14:41:00.222+07:00  INFO 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T14:41:01.801+07:00  INFO 8140 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:41:01.864+07:00  INFO 8140 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T14:41:02.499+07:00  INFO 8140 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T14:41:03.766+07:00  INFO 8140 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:41:05.052+07:00  INFO 8140 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:41:05.092+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T14:41:05.118+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T14:41:05.126+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:05.138+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:05.194+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T14:41:05.198+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T14:41:05.198+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T14:41:05.199+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T14:41:05.201+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:05.202+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:05.204+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T14:41:05.206+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T14:41:05.206+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T14:41:05.207+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:05.208+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:05.211+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T14:41:05.213+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T14:41:05.213+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T14:41:05.215+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T14:41:05.216+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:05.217+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:05.219+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T14:41:05.220+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T14:41:05.221+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T14:41:05.222+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:05.224+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:05.234+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T14:41:05.234+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T14:41:05.236+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T14:41:05.238+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:05.240+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:05.243+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T14:41:05.244+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T14:41:05.246+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T14:41:05.248+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:05.250+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:05.253+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T14:41:05.253+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T14:41:05.255+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:05.256+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:05.259+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T14:41:05.264+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T14:41:05.271+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T14:41:05.272+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T14:41:05.275+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T14:41:05.277+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:05.278+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:05.284+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T14:41:05.287+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T14:41:05.301+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T14:41:05.301+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T14:41:05.303+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:05.304+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:05.307+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T14:41:05.309+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T14:41:05.325+07:00 DEBUG 8140 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T14:41:05.332+07:00  INFO 8140 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 14.514 seconds (process running for 15.267)
2025-06-27T14:41:12.516+07:00  INFO 9976 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 9976 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T14:41:12.519+07:00 DEBUG 9976 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T14:41:12.521+07:00  INFO 9976 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T14:41:14.525+07:00  INFO 9976 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T14:41:14.530+07:00  INFO 9976 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T14:41:14.608+07:00  INFO 9976 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 0 Redis repository interfaces.
2025-06-27T14:41:14.942+07:00  INFO 9976 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T14:41:15.662+07:00  INFO 9976 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 3a38ddef-f45d-43cf-9b3f-273cbbe6e258

2025-06-27T14:41:18.081+07:00  INFO 9976 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:41:18.459+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T14:41:18.585+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T14:41:18.586+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T14:41:18.586+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T14:41:18.586+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T14:41:18.586+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T14:41:18.586+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T14:41:18.586+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T14:41:18.586+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T14:41:18.587+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T14:41:18.587+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T14:41:18.587+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T14:41:18.587+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T14:41:18.587+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T14:41:18.587+07:00  INFO 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T14:41:20.073+07:00  INFO 9976 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:41:20.161+07:00  INFO 9976 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T14:41:20.773+07:00  INFO 9976 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T14:41:21.998+07:00  INFO 9976 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:41:23.277+07:00  INFO 9976 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:41:23.351+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T14:41:23.384+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T14:41:23.392+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:23.414+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:23.473+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T14:41:23.477+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T14:41:23.478+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T14:41:23.480+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T14:41:23.484+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:23.486+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:23.491+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T14:41:23.497+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T14:41:23.498+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T14:41:23.500+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:23.501+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:23.505+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T14:41:23.508+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T14:41:23.509+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T14:41:23.511+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T14:41:23.515+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:23.518+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:23.523+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T14:41:23.523+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T14:41:23.525+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T14:41:23.527+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:23.531+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:23.536+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T14:41:23.537+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T14:41:23.539+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T14:41:23.541+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:23.543+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:23.552+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T14:41:23.552+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T14:41:23.555+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T14:41:23.558+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:23.561+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:23.568+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T14:41:23.568+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T14:41:23.570+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:23.573+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:23.577+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T14:41:23.579+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T14:41:23.585+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T14:41:23.585+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T14:41:23.587+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T14:41:23.588+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:23.590+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:23.593+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T14:41:23.594+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T14:41:23.607+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T14:41:23.608+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T14:41:23.609+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:41:23.611+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:41:23.614+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T14:41:23.616+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T14:41:23.627+07:00 DEBUG 9976 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T14:41:23.631+07:00  INFO 9976 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 13.493 seconds (process running for 14.322)
2025-06-27T14:48:31.489+07:00  INFO 6344 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 6344 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T14:48:31.493+07:00 DEBUG 6344 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T14:48:31.494+07:00  INFO 6344 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T14:48:33.983+07:00  INFO 6344 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T14:48:33.991+07:00  INFO 6344 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T14:48:34.104+07:00  INFO 6344 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 0 Redis repository interfaces.
2025-06-27T14:48:34.686+07:00  INFO 6344 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T14:48:35.792+07:00  INFO 6344 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: d011ba1d-a593-43e5-a06f-ef01ff71bef4

2025-06-27T14:48:38.588+07:00  INFO 6344 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:48:39.075+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T14:48:39.222+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T14:48:39.222+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T14:48:39.222+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T14:48:39.222+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T14:48:39.222+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T14:48:39.222+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T14:48:39.222+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T14:48:39.223+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T14:48:39.223+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T14:48:39.223+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T14:48:39.223+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T14:48:39.223+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T14:48:39.223+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T14:48:39.223+07:00  INFO 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T14:48:40.759+07:00  INFO 6344 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:48:40.868+07:00  INFO 6344 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T14:48:41.594+07:00  INFO 6344 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T14:48:42.846+07:00  INFO 6344 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:48:44.089+07:00  INFO 6344 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T14:48:44.184+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T14:48:44.208+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T14:48:44.215+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:48:44.226+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:48:44.308+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T14:48:44.313+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T14:48:44.314+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T14:48:44.318+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T14:48:44.320+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:48:44.323+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:48:44.329+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T14:48:44.335+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T14:48:44.335+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T14:48:44.338+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:48:44.340+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:48:44.342+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T14:48:44.345+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T14:48:44.345+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T14:48:44.348+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T14:48:44.350+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:48:44.352+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:48:44.355+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T14:48:44.355+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T14:48:44.357+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T14:48:44.358+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:48:44.359+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:48:44.365+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T14:48:44.365+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T14:48:44.368+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T14:48:44.371+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:48:44.373+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:48:44.381+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T14:48:44.382+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T14:48:44.387+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T14:48:44.407+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:48:44.435+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:48:44.440+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T14:48:44.440+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T14:48:44.458+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:48:44.462+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:48:44.465+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T14:48:44.466+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T14:48:44.469+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T14:48:44.470+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T14:48:44.471+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T14:48:44.473+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:48:44.474+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:48:44.478+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T14:48:44.479+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T14:48:44.488+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T14:48:44.489+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T14:48:44.491+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T14:48:44.492+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T14:48:44.498+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T14:48:44.500+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T14:48:44.514+07:00 DEBUG 6344 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T14:48:44.522+07:00  INFO 6344 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 15.606 seconds (process running for 16.49)
2025-06-27T14:48:55.053+07:00 DEBUG 6344 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T14:48:55.056+07:00 DEBUG 6344 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:48:55.058+07:00 DEBUG 6344 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [d1ee59a4-1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@dcabdbd
2025-06-27T14:48:55.062+07:00 DEBUG 6344 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@23df7fad}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@41059616}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@391d28ea}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@7ac685ef}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@4a4ff5ed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@4ab455e2}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@5ddb302}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@223cbf0d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1aaf46e6}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@2acca224}, order = 2147483647]]
2025-06-27T14:48:55.103+07:00 DEBUG 6344 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"5cddbaf3-9c95-4af6-90c3-6ee8aa25b7a5", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59910"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:48:55.111+07:00 DEBUG 6344 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0018762, duration(nanos)=1876200.0, startTimeNanos=24420838099200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@19a34e7c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@72c3e599} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"5cddbaf3-9c95-4af6-90c3-6ee8aa25b7a5", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59910"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:48:57.356+07:00 DEBUG 6344 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:48:57.359+07:00 DEBUG 6344 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.2497613, duration(nanos)=2.2497613E9, startTimeNanos=24420838099200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@19a34e7c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@72c3e599}
2025-06-27T14:49:16.824+07:00 DEBUG 6344 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T14:49:16.825+07:00 DEBUG 6344 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:49:16.825+07:00 DEBUG 6344 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [d1ee59a4-2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@dcabdbd
2025-06-27T14:49:16.825+07:00 DEBUG 6344 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@23df7fad}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@41059616}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@391d28ea}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@7ac685ef}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@4a4ff5ed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@4ab455e2}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@5ddb302}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@223cbf0d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1aaf46e6}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@2acca224}, order = 2147483647]]
2025-06-27T14:49:16.826+07:00 DEBUG 6344 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"6c16a460-5f93-47a7-97db-14adb7bbbd00", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59910"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:49:16.827+07:00 DEBUG 6344 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.084E-4, duration(nanos)=108400.0, startTimeNanos=24442556085100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@71a11854'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7f66e810} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"6c16a460-5f93-47a7-97db-14adb7bbbd00", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59910"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:49:17.008+07:00 DEBUG 6344 --- [api-gateway] [reactor-http-nio-6] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:49:17.009+07:00 DEBUG 6344 --- [api-gateway] [reactor-http-nio-6] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.1824048, duration(nanos)=1.824048E8, startTimeNanos=24442556085100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@71a11854'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7f66e810}
2025-06-27T14:51:18.339+07:00 DEBUG 6344 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T14:51:18.340+07:00 DEBUG 6344 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T14:51:18.340+07:00 DEBUG 6344 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [30ea4aff-6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@dcabdbd
2025-06-27T14:51:18.340+07:00 DEBUG 6344 --- [api-gateway] [parallel-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@23df7fad}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@41059616}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@391d28ea}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@7ac685ef}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@4a4ff5ed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@4ab455e2}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@5ddb302}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@223cbf0d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@1aaf46e6}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@2acca224}, order = 2147483647]]
2025-06-27T14:51:18.342+07:00 DEBUG 6344 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"36b8e008-30d0-4d8e-86a0-f38b48ec057e", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59937"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:51:18.343+07:00 DEBUG 6344 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.276E-4, duration(nanos)=227600.0, startTimeNanos=24564072331700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@59860f0e'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5741fa4e} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"36b8e008-30d0-4d8e-86a0-f38b48ec057e", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59937"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T14:51:18.470+07:00 DEBUG 6344 --- [api-gateway] [reactor-http-nio-1] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T14:51:18.470+07:00 DEBUG 6344 --- [api-gateway] [reactor-http-nio-1] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.1278712, duration(nanos)=1.278712E8, startTimeNanos=24564072331700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@59860f0e'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5741fa4e}
2025-06-27T15:04:22.436+07:00  INFO 14512 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 14512 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T15:04:22.439+07:00 DEBUG 14512 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T15:04:22.441+07:00  INFO 14512 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T15:04:24.622+07:00  INFO 14512 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T15:04:24.634+07:00  INFO 14512 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T15:04:24.694+07:00  INFO 14512 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.
2025-06-27T15:04:25.188+07:00  INFO 14512 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T15:04:26.574+07:00  INFO 14512 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 8d88c366-41e5-417b-9dd5-de9ade15c4bb

2025-06-27T15:04:30.150+07:00  INFO 14512 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:04:30.478+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T15:04:30.630+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T15:04:30.630+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T15:04:30.631+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T15:04:30.631+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T15:04:30.631+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T15:04:30.631+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T15:04:30.631+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T15:04:30.631+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T15:04:30.631+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T15:04:30.631+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T15:04:30.631+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T15:04:30.632+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T15:04:30.632+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T15:04:30.632+07:00  INFO 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T15:04:32.186+07:00  INFO 14512 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:04:32.256+07:00  INFO 14512 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T15:04:32.992+07:00  INFO 14512 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T15:04:34.249+07:00  INFO 14512 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:04:35.523+07:00  INFO 14512 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:04:35.570+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T15:04:35.627+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T15:04:35.640+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:04:35.669+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:04:35.734+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T15:04:35.740+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T15:04:35.741+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T15:04:35.744+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T15:04:35.747+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:04:35.750+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:04:35.756+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T15:04:35.762+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T15:04:35.762+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T15:04:35.766+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:04:35.770+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:04:35.774+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T15:04:35.776+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T15:04:35.776+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T15:04:35.779+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T15:04:35.782+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:04:35.784+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:04:35.787+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T15:04:35.787+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T15:04:35.788+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T15:04:35.790+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:04:35.791+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:04:35.793+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T15:04:35.793+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T15:04:35.794+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T15:04:35.795+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:04:35.797+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:04:35.801+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T15:04:35.802+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T15:04:35.804+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T15:04:35.805+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:04:35.807+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:04:35.811+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T15:04:35.811+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T15:04:35.812+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:04:35.813+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:04:35.816+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T15:04:35.817+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T15:04:35.822+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T15:04:35.822+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T15:04:35.824+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T15:04:35.825+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:04:35.827+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:04:35.830+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T15:04:35.831+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T15:04:35.858+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T15:04:35.860+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T15:04:35.863+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:04:35.866+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:04:35.869+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T15:04:35.870+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T15:04:35.884+07:00 DEBUG 14512 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T15:04:35.888+07:00  INFO 14512 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 16.086 seconds (process running for 17.104)
2025-06-27T15:04:41.452+07:00 DEBUG 14512 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T15:04:41.452+07:00 DEBUG 14512 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T15:04:41.453+07:00 DEBUG 14512 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [ab059b1d-1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@a7c9908
2025-06-27T15:04:41.454+07:00 DEBUG 14512 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2558f65c}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1fbd5e0}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@628b503a}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@22899683}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@4fbe486c}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@11c3ce6a}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@dbc7e0a}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@40017e98}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@11f3400c}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@1a3b1f7e}, order = 2147483647]]
2025-06-27T15:04:41.484+07:00 DEBUG 14512 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"01dc986f-9b48-45a7-8493-789f194d395c", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:60550"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T15:04:41.493+07:00 DEBUG 14512 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0014896, duration(nanos)=1489600.0, startTimeNanos=25367220546000}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@39ed205d'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@699fb5ef} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"01dc986f-9b48-45a7-8493-789f194d395c", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:60550"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T15:04:41.829+07:00 DEBUG 14512 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T15:04:41.830+07:00 DEBUG 14512 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.3389143, duration(nanos)=3.389143E8, startTimeNanos=25367220546000}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@39ed205d'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@699fb5ef}
2025-06-27T15:08:10.560+07:00  INFO 19340 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 19340 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T15:08:10.570+07:00 DEBUG 19340 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T15:08:10.572+07:00  INFO 19340 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T15:08:14.139+07:00  INFO 19340 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T15:08:14.157+07:00  INFO 19340 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T15:08:14.315+07:00  INFO 19340 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 0 Redis repository interfaces.
2025-06-27T15:08:14.921+07:00  INFO 19340 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T15:08:16.257+07:00  INFO 19340 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 13057be4-ce97-4ea6-8ee4-d716abdfadc3

2025-06-27T15:08:19.103+07:00  INFO 19340 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:08:19.518+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T15:08:19.639+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T15:08:19.639+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T15:08:19.639+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T15:08:19.639+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T15:08:19.639+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T15:08:19.640+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T15:08:19.640+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T15:08:19.640+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T15:08:19.640+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T15:08:19.640+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T15:08:19.640+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T15:08:19.640+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T15:08:19.640+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T15:08:19.640+07:00  INFO 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T15:08:21.117+07:00  INFO 19340 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:08:21.194+07:00  INFO 19340 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T15:08:21.812+07:00  INFO 19340 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T15:08:23.085+07:00  INFO 19340 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:08:24.462+07:00  INFO 19340 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:08:24.539+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T15:08:24.566+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T15:08:24.573+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:08:24.584+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:08:24.644+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T15:08:24.648+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T15:08:24.648+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T15:08:24.650+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T15:08:24.651+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:08:24.652+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:08:24.655+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T15:08:24.657+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T15:08:24.657+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T15:08:24.658+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:08:24.659+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:08:24.662+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T15:08:24.664+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T15:08:24.664+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T15:08:24.666+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T15:08:24.668+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:08:24.670+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:08:24.673+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T15:08:24.674+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T15:08:24.675+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T15:08:24.676+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:08:24.677+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:08:24.679+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T15:08:24.680+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T15:08:24.681+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T15:08:24.683+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:08:24.684+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:08:24.686+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T15:08:24.686+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T15:08:24.687+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T15:08:24.690+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:08:24.690+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:08:24.694+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T15:08:24.694+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T15:08:24.696+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:08:24.697+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:08:24.699+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T15:08:24.700+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T15:08:24.702+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T15:08:24.704+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T15:08:24.704+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T15:08:24.704+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:08:24.705+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:08:24.707+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T15:08:24.708+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T15:08:24.715+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T15:08:24.716+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T15:08:24.718+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:08:24.719+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:08:24.722+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T15:08:24.724+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T15:08:24.734+07:00 DEBUG 19340 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T15:08:24.738+07:00  INFO 19340 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 16.819 seconds (process running for 17.818)
2025-06-27T15:20:27.445+07:00  INFO 16024 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 16024 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T15:20:27.452+07:00 DEBUG 16024 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T15:20:27.453+07:00  INFO 16024 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T15:20:29.661+07:00  INFO 16024 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T15:20:29.666+07:00  INFO 16024 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T15:20:29.717+07:00  INFO 16024 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.
2025-06-27T15:20:30.063+07:00  INFO 16024 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T15:20:30.948+07:00  INFO 16024 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 89eff9e5-a030-4ab7-b1b0-4ce9ebf7ef44

2025-06-27T15:20:33.455+07:00  INFO 16024 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:20:33.768+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T15:20:33.894+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T15:20:33.894+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T15:20:33.894+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T15:20:33.894+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T15:20:33.895+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T15:20:33.895+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T15:20:33.895+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T15:20:33.895+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T15:20:33.895+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T15:20:33.895+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T15:20:33.895+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T15:20:33.895+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T15:20:33.895+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T15:20:33.895+07:00  INFO 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T15:20:35.411+07:00  INFO 16024 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:20:35.499+07:00  INFO 16024 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T15:20:36.210+07:00  INFO 16024 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T15:20:37.433+07:00  INFO 16024 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:20:38.660+07:00  INFO 16024 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T15:20:38.716+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T15:20:38.744+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T15:20:38.755+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:20:38.770+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:20:38.823+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T15:20:38.828+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T15:20:38.828+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T15:20:38.830+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T15:20:38.832+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:20:38.834+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:20:38.837+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T15:20:38.841+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T15:20:38.841+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T15:20:38.843+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:20:38.845+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:20:38.848+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T15:20:38.850+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T15:20:38.850+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T15:20:38.852+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T15:20:38.853+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:20:38.854+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:20:38.857+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T15:20:38.857+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T15:20:38.859+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T15:20:38.860+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:20:38.861+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:20:38.864+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T15:20:38.865+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T15:20:38.866+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T15:20:38.868+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:20:38.869+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:20:38.872+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T15:20:38.872+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T15:20:38.875+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T15:20:38.877+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:20:38.879+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:20:38.883+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T15:20:38.884+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T15:20:38.885+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:20:38.887+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:20:38.891+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T15:20:38.892+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T15:20:38.897+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T15:20:38.897+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T15:20:38.900+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T15:20:38.903+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:20:38.905+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:20:38.909+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T15:20:38.910+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T15:20:38.923+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T15:20:38.924+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T15:20:38.927+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T15:20:38.929+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T15:20:38.936+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T15:20:38.940+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T15:20:38.961+07:00 DEBUG 16024 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T15:20:38.967+07:00  INFO 16024 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 14.157 seconds (process running for 15.071)
2025-06-27T16:09:58.126+07:00  INFO 5184 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 5184 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T16:09:58.131+07:00 DEBUG 5184 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T16:09:58.134+07:00  INFO 5184 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T16:10:00.601+07:00  INFO 5184 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T16:10:00.616+07:00  INFO 5184 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T16:10:00.682+07:00  INFO 5184 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
2025-06-27T16:10:01.060+07:00  INFO 5184 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T16:10:01.982+07:00  INFO 5184 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 8a7a3086-8c8b-42ca-a897-eeb0f713706a

2025-06-27T16:10:04.519+07:00  INFO 5184 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T16:10:04.842+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T16:10:04.947+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T16:10:04.948+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T16:10:04.949+07:00  INFO 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T16:10:06.479+07:00  INFO 5184 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T16:10:06.581+07:00  INFO 5184 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T16:10:07.138+07:00  INFO 5184 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T16:10:08.390+07:00  INFO 5184 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T16:10:09.629+07:00  INFO 5184 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T16:10:09.708+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T16:10:09.741+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T16:10:09.749+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:10:09.762+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:10:09.819+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T16:10:09.822+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T16:10:09.823+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T16:10:09.824+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T16:10:09.826+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:10:09.828+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:10:09.833+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T16:10:09.837+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T16:10:09.838+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T16:10:09.839+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:10:09.841+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:10:09.847+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T16:10:09.849+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T16:10:09.850+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T16:10:09.853+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T16:10:09.855+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:10:09.857+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:10:09.862+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T16:10:09.863+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T16:10:09.865+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T16:10:09.868+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:10:09.869+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:10:09.873+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T16:10:09.874+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T16:10:09.878+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T16:10:09.880+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:10:09.882+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:10:09.886+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T16:10:09.887+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T16:10:09.890+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T16:10:09.892+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:10:09.894+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:10:09.901+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T16:10:09.902+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T16:10:09.904+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:10:09.905+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:10:09.909+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T16:10:09.912+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T16:10:09.916+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T16:10:09.916+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T16:10:09.918+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T16:10:09.921+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:10:09.923+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:10:09.929+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T16:10:09.931+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T16:10:09.939+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T16:10:09.940+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T16:10:09.941+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:10:09.942+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:10:09.945+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T16:10:09.946+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T16:10:09.959+07:00 DEBUG 5184 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T16:10:09.962+07:00  INFO 5184 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 15.271 seconds (process running for 16.109)
2025-06-27T16:10:33.131+07:00 DEBUG 5184 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T16:10:33.132+07:00 DEBUG 5184 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T16:10:33.132+07:00 DEBUG 5184 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [dbb7bcfa-1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@5883bf1a
2025-06-27T16:10:33.133+07:00 DEBUG 5184 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@636fccb0}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@12166229}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@dbc7e0a}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@7b332b23}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@428eb3d5}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@28519bfb}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@5ddd84d2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@66a472b9}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@4fbe486c}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@15914bb5}, order = 2147483647]]
2025-06-27T16:10:33.170+07:00 DEBUG 5184 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"74990f9b-1f26-4985-ba0d-d9dd7f5c10d4", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:61974"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T16:10:33.184+07:00 DEBUG 5184 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0038479, duration(nanos)=3847900.0, startTimeNanos=29318908745700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@38984196'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@2f3c1a76} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"74990f9b-1f26-4985-ba0d-d9dd7f5c10d4", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:61974"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T16:10:33.473+07:00 DEBUG 5184 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T16:10:33.473+07:00 DEBUG 5184 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.293954, duration(nanos)=2.93954E8, startTimeNanos=29318908745700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@38984196'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@2f3c1a76}
2025-06-27T16:16:56.358+07:00  INFO 22384 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 22384 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T16:16:56.361+07:00 DEBUG 22384 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-06-27T16:16:56.363+07:00  INFO 22384 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T16:16:58.265+07:00  INFO 22384 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T16:16:58.270+07:00  INFO 22384 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T16:16:58.369+07:00  INFO 22384 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 40 ms. Found 0 Redis repository interfaces.
2025-06-27T16:16:58.870+07:00  INFO 22384 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5ae4982e-e303-32a3-973a-0058a13c883c
2025-06-27T16:16:59.704+07:00  INFO 22384 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 9db39b3a-ae5f-4d33-ae4e-8c0cc2e9618d

2025-06-27T16:17:02.211+07:00  INFO 22384 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T16:17:02.550+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T16:17:02.668+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T16:17:02.668+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T16:17:02.668+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T16:17:02.668+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T16:17:02.668+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T16:17:02.668+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T16:17:02.668+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T16:17:02.668+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T16:17:02.668+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T16:17:02.668+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T16:17:02.669+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T16:17:02.669+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T16:17:02.669+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T16:17:02.669+07:00  INFO 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T16:17:04.158+07:00  INFO 22384 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T16:17:04.234+07:00  INFO 22384 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T16:17:04.858+07:00  INFO 22384 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-06-27T16:17:06.093+07:00  INFO 22384 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T16:17:07.327+07:00  INFO 22384 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T16:17:07.367+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T16:17:07.390+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T16:17:07.400+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:17:07.420+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:17:07.481+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T16:17:07.485+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T16:17:07.485+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T16:17:07.487+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T16:17:07.488+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:17:07.490+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:17:07.493+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T16:17:07.496+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T16:17:07.497+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T16:17:07.499+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:17:07.500+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:17:07.503+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T16:17:07.506+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T16:17:07.506+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T16:17:07.508+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T16:17:07.509+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:17:07.511+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:17:07.515+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T16:17:07.515+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T16:17:07.517+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T16:17:07.519+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:17:07.520+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:17:07.523+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T16:17:07.524+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T16:17:07.525+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T16:17:07.526+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:17:07.528+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:17:07.532+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T16:17:07.533+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T16:17:07.535+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T16:17:07.538+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:17:07.540+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:17:07.544+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T16:17:07.545+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T16:17:07.548+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:17:07.550+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:17:07.553+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthenticationFilter
2025-06-27T16:17:07.555+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {_genkey_0=LIBRARIAN, _genkey_1=ADMIN} to RoleAuthorizationFilter
2025-06-27T16:17:07.559+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T16:17:07.559+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T16:17:07.561+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T16:17:07.563+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:17:07.566+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:17:07.570+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthenticationFilter
2025-06-27T16:17:07.571+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T16:17:07.584+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T16:17:07.584+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T16:17:07.585+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {_genkey_0=Access-Control-Allow-Credentials Access-Control-Allow-Origin} to DedupeResponseHeader
2025-06-27T16:17:07.587+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {redis-rate-limiter.replenishRate=10, redis-rate-limiter.burstCapacity=20, redis-rate-limiter.requestedTokens=1, key-resolver=#{@userKeyResolver}} to RequestRateLimiter
2025-06-27T16:17:07.590+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthenticationFilter
2025-06-27T16:17:07.591+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T16:17:07.609+07:00 DEBUG 22384 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T16:17:07.618+07:00  INFO 22384 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 13.59 seconds (process running for 14.336)
2025-06-27T16:17:22.192+07:00 DEBUG 22384 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T16:17:22.193+07:00 DEBUG 22384 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T16:17:22.193+07:00 DEBUG 22384 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [296dd574-1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@13f31bce
2025-06-27T16:17:22.195+07:00 DEBUG 22384 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@28519bfb}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@208e5b23}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@636fccb0}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@66a472b9}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@5ddd84d2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@15914bb5}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@3fd5d679}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@428eb3d5}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@dbc7e0a}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@7b332b23}, order = 2147483647]]
2025-06-27T16:17:22.231+07:00 DEBUG 22384 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"797f151c-aec0-4436-9aa6-9af62a20b1e7", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:62100"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T16:17:22.243+07:00 DEBUG 22384 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0018338, duration(nanos)=1833800.0, startTimeNanos=29727970815700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7ca2d819'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@32af6813} created for the request. New headers are [Content-Type:"application/json", User-Agent:"PostmanRuntime/7.44.1", Accept:"*/*", Postman-Token:"797f151c-aec0-4436-9aa6-9af62a20b1e7", Host:"localhost:8080", Accept-Encoding:"gzip, deflate, br", Content-Length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:62100"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T16:17:22.707+07:00 DEBUG 22384 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T16:17:22.708+07:00 DEBUG 22384 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.467123, duration(nanos)=4.67123E8, startTimeNanos=29727970815700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7ca2d819'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@32af6813}
2025-06-27T17:31:48.587+07:00  INFO 17740 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 17740 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T17:31:48.590+07:00 DEBUG 17740 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T17:31:48.591+07:00  INFO 17740 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T17:31:50.445+07:00  WARN 17740 --- [api-gateway] [main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.support.BeanDefinitionOverrideException: Invalid bean definition with name 'springSecurityFilterChain' defined in class path resource [org/springframework/boot/actuate/autoconfigure/security/reactive/ReactiveManagementWebSecurityAutoConfiguration.class]: Cannot register bean definition [Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.actuate.autoconfigure.security.reactive.ReactiveManagementWebSecurityAutoConfiguration; factoryMethodName=springSecurityFilterChain; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [org/springframework/boot/actuate/autoconfigure/security/reactive/ReactiveManagementWebSecurityAutoConfiguration.class]] for bean 'springSecurityFilterChain' since there is already [Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration; factoryMethodName=springSecurityFilterChain; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]] bound.
2025-06-27T17:31:50.471+07:00  INFO 17740 --- [api-gateway] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-27T17:31:50.507+07:00 ERROR 17740 --- [api-gateway] [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

The bean 'springSecurityFilterChain', defined in class path resource [org/springframework/boot/actuate/autoconfigure/security/reactive/ReactiveManagementWebSecurityAutoConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class] and overriding is disabled.

Action:

Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true

2025-06-27T17:35:37.650+07:00  INFO 22332 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 22332 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T17:35:37.656+07:00 DEBUG 22332 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T17:35:37.659+07:00  INFO 22332 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T17:35:40.057+07:00  INFO 22332 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T17:35:40.061+07:00  INFO 22332 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T17:35:40.113+07:00  INFO 22332 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.
2025-06-27T17:35:40.458+07:00  INFO 22332 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=a189f077-5aa9-3595-8a7c-1d3da192a4e8
2025-06-27T17:35:40.971+07:00  INFO 22332 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T17:35:40.986+07:00  INFO 22332 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T17:35:40.987+07:00  INFO 22332 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T17:35:41.514+07:00  INFO 22332 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 2d3ff880-c061-4819-bbd9-c66a9bdd6a06

2025-06-27T17:35:43.220+07:00  INFO 22332 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:35:44.200+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RoleAuthorizationFilter', args={_genkey_0=LIBRARIAN, _genkey_1=ADMIN}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T17:35:44.421+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T17:35:44.422+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T17:35:44.422+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T17:35:44.422+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T17:35:44.422+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T17:35:44.422+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T17:35:44.422+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T17:35:44.423+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T17:35:44.423+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T17:35:44.423+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T17:35:44.423+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T17:35:44.423+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T17:35:44.423+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T17:35:44.423+07:00  INFO 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T17:35:46.084+07:00  INFO 22332 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:35:46.167+07:00  INFO 22332 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T17:35:46.703+07:00  INFO 22332 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-27T17:35:47.957+07:00  INFO 22332 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:35:49.179+07:00  INFO 22332 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:35:49.263+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T17:35:49.299+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T17:35:49.307+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T17:35:49.336+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T17:35:49.336+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T17:35:49.338+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T17:35:49.340+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T17:35:49.343+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T17:35:49.343+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T17:35:49.352+07:00 ERROR 22332 --- [api-gateway] [main] o.s.c.gateway.route.CachingRouteLocator  : Refresh routes error !!!

java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name JwtAuthenticationFilter
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.loadGatewayFilters(RouteDefinitionRouteLocator.java:145) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.getFilters(RouteDefinitionRouteLocator.java:192) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.convertToRoute(RouteDefinitionRouteLocator.java:132) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmitScalar(FluxFlatMap.java:492) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:424) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.drain(FluxMergeSequential.java:439) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.innerComplete(FluxMergeSequential.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialInner.onSubscribe(FluxMergeSequential.java:559) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4512) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribeWith(Mono.java:4578) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4478) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4414) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4386) ~[reactor-core-3.6.0.jar:3.6.0]
	at org.springframework.cloud.gateway.route.CachingRouteLocator.onApplicationEvent(CachingRouteLocator.java:100) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.CachingRouteLocator.onApplicationEvent(CachingRouteLocator.java:42) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.reset(RouteRefreshListener.java:73) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.onApplicationEvent(RouteRefreshListener.java:50) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:968) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331) ~[spring-boot-3.2.0.jar:3.2.0]
	at com.library.gateway.ApiGatewayApplication.main(ApiGatewayApplication.java:13) ~[classes/:na]

2025-06-27T17:35:49.370+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T17:35:49.372+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T17:35:49.374+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T17:35:49.377+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T17:35:49.377+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T17:35:49.378+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T17:35:49.380+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T17:35:49.384+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T17:35:49.385+07:00 DEBUG 22332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T17:35:49.389+07:00  WARN 22332 --- [api-gateway] [main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name JwtAuthenticationFilter
2025-06-27T17:35:49.496+07:00  INFO 22332 --- [api-gateway] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-27T17:35:49.538+07:00 ERROR 22332 --- [api-gateway] [main] o.s.boot.SpringApplication               : Application run failed

java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name JwtAuthenticationFilter
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.loadGatewayFilters(RouteDefinitionRouteLocator.java:145) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.getFilters(RouteDefinitionRouteLocator.java:192) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.convertToRoute(RouteDefinitionRouteLocator.java:132) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmitScalar(FluxFlatMap.java:492) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:424) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.drain(FluxMergeSequential.java:439) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.innerComplete(FluxMergeSequential.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialInner.onSubscribe(FluxMergeSequential.java:559) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.InternalFluxOperator.subscribe(InternalFluxOperator.java:68) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.blockLast(Flux.java:2755) ~[reactor-core-3.6.0.jar:3.6.0]
	at org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter.lambda$onApplicationEvent$3(WeightCalculatorWebFilter.java:156) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.ifAvailable(DefaultListableBeanFactory.java:2124) ~[spring-beans-6.1.1.jar:6.1.1]
	at org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter.onApplicationEvent(WeightCalculatorWebFilter.java:156) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.reset(RouteRefreshListener.java:73) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.onApplicationEvent(RouteRefreshListener.java:50) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:968) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331) ~[spring-boot-3.2.0.jar:3.2.0]
	at com.library.gateway.ApiGatewayApplication.main(ApiGatewayApplication.java:13) ~[classes/:na]
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:103) ~[reactor-core-3.6.0.jar:3.6.0]
		at reactor.core.publisher.Flux.blockLast(Flux.java:2756) ~[reactor-core-3.6.0.jar:3.6.0]
		... 24 common frames omitted

2025-06-27T17:40:01.025+07:00  INFO 12816 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 12816 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T17:40:01.028+07:00 DEBUG 12816 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T17:40:01.031+07:00  INFO 12816 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T17:40:03.292+07:00  INFO 12816 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T17:40:03.325+07:00  INFO 12816 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T17:40:03.500+07:00  INFO 12816 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 0 Redis repository interfaces.
2025-06-27T17:40:03.954+07:00  INFO 12816 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789c11d7-6371-340d-8721-927550074c43
2025-06-27T17:40:04.613+07:00  INFO 12816 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T17:40:04.630+07:00  INFO 12816 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T17:40:04.630+07:00  INFO 12816 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T17:40:05.243+07:00  INFO 12816 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 59fc92a0-166e-4da5-a0f1-0093536143d6

2025-06-27T17:40:06.950+07:00  INFO 12816 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:40:07.808+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationGatewayFilterFactory', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationGatewayFilterFactory', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationGatewayFilterFactory', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationGatewayFilterFactory', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T17:40:07.938+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T17:40:07.938+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T17:40:07.938+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T17:40:07.938+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T17:40:07.938+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T17:40:07.938+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T17:40:07.938+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T17:40:07.939+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T17:40:07.939+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T17:40:07.939+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T17:40:07.939+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T17:40:07.939+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T17:40:07.939+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T17:40:07.939+07:00  INFO 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T17:40:09.429+07:00  INFO 12816 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:40:09.526+07:00  INFO 12816 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T17:40:10.225+07:00  INFO 12816 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-27T17:40:11.482+07:00  INFO 12816 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:40:12.755+07:00  INFO 12816 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:40:12.826+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T17:40:12.878+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T17:40:12.884+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T17:40:12.905+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T17:40:12.906+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T17:40:12.907+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T17:40:12.909+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T17:40:12.912+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T17:40:12.913+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T17:40:12.921+07:00 ERROR 12816 --- [api-gateway] [main] o.s.c.gateway.route.CachingRouteLocator  : Refresh routes error !!!

java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name JwtAuthenticationGatewayFilterFactory
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.loadGatewayFilters(RouteDefinitionRouteLocator.java:145) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.getFilters(RouteDefinitionRouteLocator.java:192) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.convertToRoute(RouteDefinitionRouteLocator.java:132) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmitScalar(FluxFlatMap.java:492) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:424) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.drain(FluxMergeSequential.java:439) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.innerComplete(FluxMergeSequential.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialInner.onSubscribe(FluxMergeSequential.java:559) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4512) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribeWith(Mono.java:4578) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4478) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4414) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4386) ~[reactor-core-3.6.0.jar:3.6.0]
	at org.springframework.cloud.gateway.route.CachingRouteLocator.onApplicationEvent(CachingRouteLocator.java:100) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.CachingRouteLocator.onApplicationEvent(CachingRouteLocator.java:42) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.reset(RouteRefreshListener.java:73) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.onApplicationEvent(RouteRefreshListener.java:50) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:968) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331) ~[spring-boot-3.2.0.jar:3.2.0]
	at com.library.gateway.ApiGatewayApplication.main(ApiGatewayApplication.java:13) ~[classes/:na]

2025-06-27T17:40:12.936+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T17:40:12.937+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T17:40:12.938+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T17:40:12.940+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T17:40:12.940+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T17:40:12.942+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T17:40:12.944+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T17:40:12.948+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T17:40:12.948+07:00 DEBUG 12816 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T17:40:12.951+07:00  WARN 12816 --- [api-gateway] [main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name JwtAuthenticationGatewayFilterFactory
2025-06-27T17:40:13.030+07:00  INFO 12816 --- [api-gateway] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-27T17:40:13.077+07:00 ERROR 12816 --- [api-gateway] [main] o.s.boot.SpringApplication               : Application run failed

java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name JwtAuthenticationGatewayFilterFactory
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.loadGatewayFilters(RouteDefinitionRouteLocator.java:145) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.getFilters(RouteDefinitionRouteLocator.java:192) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.convertToRoute(RouteDefinitionRouteLocator.java:132) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmitScalar(FluxFlatMap.java:492) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:424) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.drain(FluxMergeSequential.java:439) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.innerComplete(FluxMergeSequential.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialInner.onSubscribe(FluxMergeSequential.java:559) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.InternalFluxOperator.subscribe(InternalFluxOperator.java:68) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.blockLast(Flux.java:2755) ~[reactor-core-3.6.0.jar:3.6.0]
	at org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter.lambda$onApplicationEvent$3(WeightCalculatorWebFilter.java:156) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.ifAvailable(DefaultListableBeanFactory.java:2124) ~[spring-beans-6.1.1.jar:6.1.1]
	at org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter.onApplicationEvent(WeightCalculatorWebFilter.java:156) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.reset(RouteRefreshListener.java:73) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.onApplicationEvent(RouteRefreshListener.java:50) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:968) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331) ~[spring-boot-3.2.0.jar:3.2.0]
	at com.library.gateway.ApiGatewayApplication.main(ApiGatewayApplication.java:13) ~[classes/:na]
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:103) ~[reactor-core-3.6.0.jar:3.6.0]
		at reactor.core.publisher.Flux.blockLast(Flux.java:2756) ~[reactor-core-3.6.0.jar:3.6.0]
		... 24 common frames omitted

2025-06-27T17:41:22.828+07:00  INFO 9900 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 9900 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T17:41:22.835+07:00 DEBUG 9900 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T17:41:22.837+07:00  INFO 9900 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T17:41:24.801+07:00  INFO 9900 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T17:41:24.808+07:00  INFO 9900 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T17:41:24.868+07:00  INFO 9900 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
2025-06-27T17:41:25.218+07:00  INFO 9900 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=a189f077-5aa9-3595-8a7c-1d3da192a4e8
2025-06-27T17:41:25.800+07:00  INFO 9900 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T17:41:25.814+07:00  INFO 9900 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T17:41:25.814+07:00  INFO 9900 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T17:41:26.400+07:00  INFO 9900 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 4cf61eaf-28b4-4656-91e4-af231cf7bc01

2025-06-27T17:41:28.063+07:00  INFO 9900 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:41:28.890+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthenticationFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T17:41:29.119+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T17:41:29.120+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T17:41:29.120+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T17:41:29.120+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T17:41:29.120+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T17:41:29.120+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T17:41:29.120+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T17:41:29.120+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T17:41:29.120+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T17:41:29.120+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T17:41:29.120+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T17:41:29.122+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T17:41:29.122+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T17:41:29.122+07:00  INFO 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T17:41:30.612+07:00  INFO 9900 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:41:30.686+07:00  INFO 9900 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T17:41:31.132+07:00  INFO 9900 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-27T17:41:32.383+07:00  INFO 9900 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:41:33.619+07:00  INFO 9900 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:41:33.685+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T17:41:33.723+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T17:41:33.733+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T17:41:33.758+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T17:41:33.758+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T17:41:33.759+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T17:41:33.761+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T17:41:33.764+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T17:41:33.765+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T17:41:33.776+07:00 ERROR 9900 --- [api-gateway] [main] o.s.c.gateway.route.CachingRouteLocator  : Refresh routes error !!!

java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name JwtAuthenticationFilter
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.loadGatewayFilters(RouteDefinitionRouteLocator.java:145) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.getFilters(RouteDefinitionRouteLocator.java:192) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.convertToRoute(RouteDefinitionRouteLocator.java:132) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmitScalar(FluxFlatMap.java:492) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:424) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.drain(FluxMergeSequential.java:439) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.innerComplete(FluxMergeSequential.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialInner.onSubscribe(FluxMergeSequential.java:559) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4512) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribeWith(Mono.java:4578) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4478) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4414) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4386) ~[reactor-core-3.6.0.jar:3.6.0]
	at org.springframework.cloud.gateway.route.CachingRouteLocator.onApplicationEvent(CachingRouteLocator.java:100) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.CachingRouteLocator.onApplicationEvent(CachingRouteLocator.java:42) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.reset(RouteRefreshListener.java:73) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.onApplicationEvent(RouteRefreshListener.java:50) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:968) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331) ~[spring-boot-3.2.0.jar:3.2.0]
	at com.library.gateway.ApiGatewayApplication.main(ApiGatewayApplication.java:13) ~[classes/:na]

2025-06-27T17:41:33.793+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T17:41:33.794+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T17:41:33.795+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T17:41:33.798+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T17:41:33.799+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T17:41:33.800+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T17:41:33.802+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T17:41:33.804+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T17:41:33.804+07:00 DEBUG 9900 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T17:41:33.806+07:00  WARN 9900 --- [api-gateway] [main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name JwtAuthenticationFilter
2025-06-27T17:41:33.873+07:00  INFO 9900 --- [api-gateway] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-27T17:41:33.907+07:00 ERROR 9900 --- [api-gateway] [main] o.s.boot.SpringApplication               : Application run failed

java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name JwtAuthenticationFilter
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.loadGatewayFilters(RouteDefinitionRouteLocator.java:145) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.getFilters(RouteDefinitionRouteLocator.java:192) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator.convertToRoute(RouteDefinitionRouteLocator.java:132) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmitScalar(FluxFlatMap.java:492) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:424) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.drain(FluxMergeSequential.java:439) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.innerComplete(FluxMergeSequential.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialInner.onSubscribe(FluxMergeSequential.java:559) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onNext(FluxMergeSequential.java:237) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxMergeSequential$MergeSequentialMain.onSubscribe(FluxMergeSequential.java:198) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.InternalFluxOperator.subscribe(InternalFluxOperator.java:68) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8777) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.Flux.blockLast(Flux.java:2755) ~[reactor-core-3.6.0.jar:3.6.0]
	at org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter.lambda$onApplicationEvent$3(WeightCalculatorWebFilter.java:156) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.ifAvailable(DefaultListableBeanFactory.java:2124) ~[spring-beans-6.1.1.jar:6.1.1]
	at org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter.onApplicationEvent(WeightCalculatorWebFilter.java:156) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.reset(RouteRefreshListener.java:73) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.cloud.gateway.route.RouteRefreshListener.onApplicationEvent(RouteRefreshListener.java:50) ~[spring-cloud-gateway-server-4.1.2.jar:4.1.2]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:445) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:968) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619) ~[spring-context-6.1.1.jar:6.1.1]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342) ~[spring-boot-3.2.0.jar:3.2.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331) ~[spring-boot-3.2.0.jar:3.2.0]
	at com.library.gateway.ApiGatewayApplication.main(ApiGatewayApplication.java:13) ~[classes/:na]
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:103) ~[reactor-core-3.6.0.jar:3.6.0]
		at reactor.core.publisher.Flux.blockLast(Flux.java:2756) ~[reactor-core-3.6.0.jar:3.6.0]
		... 24 common frames omitted

2025-06-27T17:49:06.980+07:00  INFO 19432 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.15 with PID 19432 (C:\Users\ADMIN\OneDrive\Desktop\Library-Project\api-gateway\target\classes started by ADMIN in C:\Users\ADMIN\OneDrive\Desktop\Library-Project)
2025-06-27T17:49:06.983+07:00 DEBUG 19432 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T17:49:06.985+07:00  INFO 19432 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T17:49:09.117+07:00  INFO 19432 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T17:49:09.125+07:00  INFO 19432 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T17:49:09.185+07:00  INFO 19432 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
2025-06-27T17:49:09.558+07:00  INFO 19432 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789c11d7-6371-340d-8721-927550074c43
2025-06-27T17:49:10.059+07:00  INFO 19432 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T17:49:10.079+07:00  INFO 19432 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T17:49:10.079+07:00  INFO 19432 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T17:49:10.667+07:00  INFO 19432 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 2be4f7c2-e9d5-4591-a9dc-94229d9ca5c7

2025-06-27T17:49:12.303+07:00  INFO 19432 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:49:13.298+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T17:49:13.443+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T17:49:13.444+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T17:49:13.445+07:00  INFO 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T17:49:14.989+07:00  INFO 19432 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:49:15.050+07:00  INFO 19432 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T17:49:15.558+07:00  INFO 19432 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-27T17:49:16.811+07:00  INFO 19432 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:49:18.068+07:00  INFO 19432 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-06-27T17:49:18.145+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T17:49:18.167+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T17:49:18.172+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T17:49:18.203+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T17:49:18.203+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T17:49:18.204+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T17:49:18.206+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T17:49:18.209+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T17:49:18.209+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T17:49:18.211+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthentication
2025-06-27T17:49:18.213+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T17:49:18.214+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T17:49:18.215+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T17:49:18.217+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T17:49:18.217+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T17:49:18.218+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T17:49:18.219+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T17:49:18.219+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T17:49:18.221+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T17:49:18.222+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T17:49:18.222+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T17:49:18.225+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T17:49:18.225+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T17:49:18.225+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T17:49:18.227+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthentication
2025-06-27T17:49:18.227+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T17:49:18.228+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T17:49:18.229+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T17:49:18.230+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthentication
2025-06-27T17:49:18.232+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T17:49:18.239+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T17:49:18.239+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T17:49:18.240+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthentication
2025-06-27T17:49:18.241+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T17:49:18.256+07:00 DEBUG 19432 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T17:49:18.261+07:00  INFO 19432 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 13.662 seconds (process running for 14.453)
2025-06-27T17:49:30.395+07:00 DEBUG 19432 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T17:49:30.396+07:00 DEBUG 19432 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T17:49:30.397+07:00 DEBUG 19432 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [5120a9b6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@4feb6e2c
2025-06-27T17:49:30.399+07:00 DEBUG 19432 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@7f70e244}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@7cbf4f8c}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1a66be41}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@105ffc58}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6d2db15b}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@fd14789}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@749ad37c}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@68454ed5}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@12d44a2a}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f64d943}, order = 2147483647]]
2025-06-27T17:49:30.436+07:00 DEBUG 19432 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", postman-token:"c8036169-50c6-4422-973f-f6f8910e31b9", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64914"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T17:49:30.445+07:00 DEBUG 19432 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0014517, duration(nanos)=1451700.0, startTimeNanos=35256172611300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6a18bc9'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5badb899} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", postman-token:"c8036169-50c6-4422-973f-f6f8910e31b9", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"65", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64914"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T17:49:31.220+07:00 DEBUG 19432 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T17:49:31.221+07:00 DEBUG 19432 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.7776351, duration(nanos)=7.776351E8, startTimeNanos=35256172611300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6a18bc9'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5badb899}
2025-06-27T17:49:46.979+07:00 DEBUG 19432 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T17:49:46.980+07:00 DEBUG 19432 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T17:49:46.980+07:00 DEBUG 19432 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [5d268f3f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@4feb6e2c
2025-06-27T17:49:46.980+07:00 DEBUG 19432 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@7f70e244}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@7cbf4f8c}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1a66be41}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@105ffc58}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6d2db15b}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@fd14789}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@749ad37c}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@68454ed5}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@12d44a2a}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f64d943}, order = 2147483647]]
2025-06-27T17:49:46.982+07:00 DEBUG 19432 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjRhOTBmYWVjLTBlYjctNGY5MS05ZGNkLTI3N2MwOWFkNzIwNiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjEzNzEsImV4cCI6MTc1MTAyMjI3MX0.J77QdQ2yfb4yn7SINHHtQU672b27twy2zntpPpw6oquIFC1eUwajGRogygRnEcIDZMsO3XPoA0Mzk2L_iV11lFvpbkzksjtsxzMWQFis27tKG7cETd24el6c4cKfCW9eaTZXML83SEuXkziUgOnndGWN9yJOH4ozebWYgPVoqYVMHWGctCouPkHTHXMNYT9MSJNfKwEdF4Orm2LANfCaPC-P_n0O1_-GgANezMyKnSIDlpkJAeLwRGqw83tJFYmHYgnoj4LdbzsIEy1FW5IYwfKA7UHn0pNiMFZ6r8Qpqsy2KsxSZ4yjEcTUeDkiBDlWhSatNtKGfbgnXKlFSS9pdg", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", postman-token:"c361a6c7-d29f-49ff-ad69-2dfbe506c55d", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------944118929779651865904153", content-length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64914"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T17:49:46.982+07:00 DEBUG 19432 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.078E-4, duration(nanos)=107800.0, startTimeNanos=35272711837900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@73cd8462'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@74c09fab} created for the request. New headers are [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjRhOTBmYWVjLTBlYjctNGY5MS05ZGNkLTI3N2MwOWFkNzIwNiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjEzNzEsImV4cCI6MTc1MTAyMjI3MX0.J77QdQ2yfb4yn7SINHHtQU672b27twy2zntpPpw6oquIFC1eUwajGRogygRnEcIDZMsO3XPoA0Mzk2L_iV11lFvpbkzksjtsxzMWQFis27tKG7cETd24el6c4cKfCW9eaTZXML83SEuXkziUgOnndGWN9yJOH4ozebWYgPVoqYVMHWGctCouPkHTHXMNYT9MSJNfKwEdF4Orm2LANfCaPC-P_n0O1_-GgANezMyKnSIDlpkJAeLwRGqw83tJFYmHYgnoj4LdbzsIEy1FW5IYwfKA7UHn0pNiMFZ6r8Qpqsy2KsxSZ4yjEcTUeDkiBDlWhSatNtKGfbgnXKlFSS9pdg", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", postman-token:"c361a6c7-d29f-49ff-ad69-2dfbe506c55d", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------944118929779651865904153", content-length:"5157", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64914"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T17:49:47.506+07:00 DEBUG 19432 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T17:49:47.507+07:00 DEBUG 19432 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.525257, duration(nanos)=5.25257E8, startTimeNanos=35272711837900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@73cd8462'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@74c09fab}
2025-06-27T17:52:09.805+07:00 DEBUG 19432 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T17:52:09.805+07:00 DEBUG 19432 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T17:52:09.805+07:00 DEBUG 19432 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [62114876] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@4feb6e2c
2025-06-27T17:52:09.806+07:00 DEBUG 19432 --- [api-gateway] [parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@7f70e244}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@7cbf4f8c}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1a66be41}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@105ffc58}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6d2db15b}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@fd14789}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@749ad37c}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@68454ed5}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@12d44a2a}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f64d943}, order = 2147483647]]
2025-06-27T17:52:09.807+07:00 DEBUG 19432 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjRhOTBmYWVjLTBlYjctNGY5MS05ZGNkLTI3N2MwOWFkNzIwNiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjEzNzEsImV4cCI6MTc1MTAyMjI3MX0.J77QdQ2yfb4yn7SINHHtQU672b27twy2zntpPpw6oquIFC1eUwajGRogygRnEcIDZMsO3XPoA0Mzk2L_iV11lFvpbkzksjtsxzMWQFis27tKG7cETd24el6c4cKfCW9eaTZXML83SEuXkziUgOnndGWN9yJOH4ozebWYgPVoqYVMHWGctCouPkHTHXMNYT9MSJNfKwEdF4Orm2LANfCaPC-P_n0O1_-GgANezMyKnSIDlpkJAeLwRGqw83tJFYmHYgnoj4LdbzsIEy1FW5IYwfKA7UHn0pNiMFZ6r8Qpqsy2KsxSZ4yjEcTUeDkiBDlWhSatNtKGfbgnXKlFSS9pdg", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", postman-token:"d6a2bbb7-32c9-421a-a892-eb2b55df9107", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------420526013834601230589516", content-length:"12172236", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64976"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T17:52:09.808+07:00 DEBUG 19432 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.368E-4, duration(nanos)=136800.0, startTimeNanos=35415537440500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@34ace5f6'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3a6b1d13} created for the request. New headers are [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjRhOTBmYWVjLTBlYjctNGY5MS05ZGNkLTI3N2MwOWFkNzIwNiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjEzNzEsImV4cCI6MTc1MTAyMjI3MX0.J77QdQ2yfb4yn7SINHHtQU672b27twy2zntpPpw6oquIFC1eUwajGRogygRnEcIDZMsO3XPoA0Mzk2L_iV11lFvpbkzksjtsxzMWQFis27tKG7cETd24el6c4cKfCW9eaTZXML83SEuXkziUgOnndGWN9yJOH4ozebWYgPVoqYVMHWGctCouPkHTHXMNYT9MSJNfKwEdF4Orm2LANfCaPC-P_n0O1_-GgANezMyKnSIDlpkJAeLwRGqw83tJFYmHYgnoj4LdbzsIEy1FW5IYwfKA7UHn0pNiMFZ6r8Qpqsy2KsxSZ4yjEcTUeDkiBDlWhSatNtKGfbgnXKlFSS9pdg", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", postman-token:"d6a2bbb7-32c9-421a-a892-eb2b55df9107", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------420526013834601230589516", content-length:"12172236", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:64976"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T17:52:11.149+07:00 DEBUG 19432 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T17:52:11.150+07:00 DEBUG 19432 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.3417273, duration(nanos)=1.3417273E9, startTimeNanos=35415537440500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@34ace5f6'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3a6b1d13}
2025-06-27T19:29:49.290+07:00  INFO 22456 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.12 with PID 22456 (C:\Users\-MSI-\IdeaProjects\Library-Project\api-gateway\target\classes started by -MSI- in C:\Users\-MSI-\IdeaProjects\Library-Project)
2025-06-27T19:29:49.292+07:00 DEBUG 22456 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T19:29:49.292+07:00  INFO 22456 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T19:29:50.241+07:00  INFO 22456 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T19:29:50.244+07:00  INFO 22456 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T19:29:50.284+07:00  INFO 22456 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.
2025-06-27T19:29:50.440+07:00  INFO 22456 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=9f8a3920-48d3-3486-857b-659d8249f867
2025-06-27T19:29:50.649+07:00  INFO 22456 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T19:29:50.661+07:00  INFO 22456 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T19:29:50.662+07:00  INFO 22456 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T19:29:50.955+07:00  INFO 22456 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 86413ec6-64e3-4d1b-a8dd-62046952943d

2025-06-27T19:29:51.889+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T19:29:51.956+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T19:29:51.956+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T19:29:51.956+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T19:29:51.956+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T19:29:51.956+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T19:29:51.956+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T19:29:51.957+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T19:29:51.957+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T19:29:51.957+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T19:29:51.957+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T19:29:51.957+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T19:29:51.957+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T19:29:51.957+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T19:29:51.957+07:00  INFO 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T19:29:52.299+07:00  INFO 22456 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T19:29:52.562+07:00  INFO 22456 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-27T19:29:52.866+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T19:29:52.875+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T19:29:52.878+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T19:29:52.886+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T19:29:52.888+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T19:29:52.889+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T19:29:52.890+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T19:29:52.891+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T19:29:52.891+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T19:29:52.891+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthentication
2025-06-27T19:29:52.892+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T19:29:52.892+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T19:29:52.893+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T19:29:52.894+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T19:29:52.894+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T19:29:52.894+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T19:29:52.895+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T19:29:52.895+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T19:29:52.895+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T19:29:52.896+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T19:29:52.896+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T19:29:52.897+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T19:29:52.897+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T19:29:52.897+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T19:29:52.898+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthentication
2025-06-27T19:29:52.898+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T19:29:52.899+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T19:29:52.899+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T19:29:52.900+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthentication
2025-06-27T19:29:52.900+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T19:29:52.904+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T19:29:52.904+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T19:29:52.905+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthentication
2025-06-27T19:29:52.906+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T19:29:52.913+07:00 DEBUG 22456 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T19:29:52.915+07:00  INFO 22456 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 4.327 seconds (process running for 5.581)
2025-06-27T19:29:53.816+07:00  WARN 22456 --- [api-gateway] [lettuce-nioEventLoop-4-1] o.s.b.a.d.r.RedisReactiveHealthIndicator : Redis health check failed

org.springframework.data.redis.RedisSystemException: Cannot read Redis info
	at org.springframework.data.redis.connection.convert.Converters.toProperties(Converters.java:113) ~[spring-data-redis-3.2.0.jar:3.2.0]
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:250) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.6.0.jar:3.6.0]
	at io.lettuce.core.RedisPublisher$ImmediateSubscriber.onNext(RedisPublisher.java:890) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.RedisPublisher$RedisSubscription.onNext(RedisPublisher.java:291) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.RedisPublisher$SubscriptionCommand.doOnComplete(RedisPublisher.java:777) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:65) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: java.lang.IllegalArgumentException: Malformed \uxxxx encoding.
	at java.base/java.util.Properties.loadConvert(Properties.java:662) ~[na:na]
	at java.base/java.util.Properties.load0(Properties.java:456) ~[na:na]
	at java.base/java.util.Properties.load(Properties.java:382) ~[na:na]
	at org.springframework.data.redis.connection.convert.Converters.toProperties(Converters.java:111) ~[spring-data-redis-3.2.0.jar:3.2.0]
	... 28 common frames omitted

2025-06-27T19:31:21.906+07:00 DEBUG 22456 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:31:21.907+07:00 DEBUG 22456 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/register] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:31:21.908+07:00 DEBUG 22456 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [7d345e07] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@1050395e
2025-06-27T19:31:21.908+07:00 DEBUG 22456 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2d172c7}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@26c6288d}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@3e8afc2d}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@614cd187}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@e895e3e}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@115ef673}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@77476fcf}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6802d023}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@58583a2d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@8ce3f27}, order = 2147483647]]
2025-06-27T19:31:21.928+07:00 DEBUG 22456 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"a5b0dea9-5263-4ba1-a537-b560700bb1e6", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54937"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:31:21.933+07:00 DEBUG 22456 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=9.362E-4, duration(nanos)=936200.0, startTimeNanos=115817231507200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@46e8fe48'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@2ff07274} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"a5b0dea9-5263-4ba1-a537-b560700bb1e6", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54937"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:31:22.538+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:31:22.538+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.6061672, duration(nanos)=6.061672E8, startTimeNanos=115817231507200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@46e8fe48'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@2ff07274}
2025-06-27T19:32:17.236+07:00 DEBUG 22456 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:32:17.236+07:00 DEBUG 22456 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/register] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:32:17.236+07:00 DEBUG 22456 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [6db36707] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@1050395e
2025-06-27T19:32:17.236+07:00 DEBUG 22456 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2d172c7}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@26c6288d}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@3e8afc2d}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@614cd187}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@e895e3e}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@115ef673}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@77476fcf}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6802d023}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@58583a2d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@8ce3f27}, order = 2147483647]]
2025-06-27T19:32:17.237+07:00 DEBUG 22456 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"96c31cbc-ea29-48bd-92dd-38a058fd2ea7", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54961"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:32:17.238+07:00 DEBUG 22456 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.3E-5, duration(nanos)=73000.0, startTimeNanos=115872537289100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@348d9e8a'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3a4a766b} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"96c31cbc-ea29-48bd-92dd-38a058fd2ea7", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54961"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:32:17.371+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:32:17.371+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.1342519, duration(nanos)=1.342519E8, startTimeNanos=115872537289100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@348d9e8a'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3a4a766b}
2025-06-27T19:32:31.910+07:00 DEBUG 22456 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:32:31.911+07:00 DEBUG 22456 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/register] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:32:31.911+07:00 DEBUG 22456 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [197567a3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@1050395e
2025-06-27T19:32:31.911+07:00 DEBUG 22456 --- [api-gateway] [parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2d172c7}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@26c6288d}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@3e8afc2d}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@614cd187}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@e895e3e}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@115ef673}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@77476fcf}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6802d023}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@58583a2d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@8ce3f27}, order = 2147483647]]
2025-06-27T19:32:31.912+07:00 DEBUG 22456 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"27fdd7de-f71f-4caa-ac49-a83ef0de8cb9", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54961"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:32:31.912+07:00 DEBUG 22456 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.59E-5, duration(nanos)=75900.0, startTimeNanos=115887211947500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@75596457'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7b9e848c} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"27fdd7de-f71f-4caa-ac49-a83ef0de8cb9", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54961"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:32:31.926+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:32:31.926+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0135281, duration(nanos)=1.35281E7, startTimeNanos=115887211947500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@75596457'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7b9e848c}
2025-06-27T19:32:38.518+07:00 DEBUG 22456 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:32:38.518+07:00 DEBUG 22456 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/register] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:32:38.518+07:00 DEBUG 22456 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [299d162d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@1050395e
2025-06-27T19:32:38.518+07:00 DEBUG 22456 --- [api-gateway] [parallel-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2d172c7}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@26c6288d}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@3e8afc2d}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@614cd187}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@e895e3e}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@115ef673}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@77476fcf}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6802d023}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@58583a2d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@8ce3f27}, order = 2147483647]]
2025-06-27T19:32:38.519+07:00 DEBUG 22456 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"3460ae22-20bc-49e2-9343-6216cdbe19a9", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"108", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54972"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:32:38.519+07:00 DEBUG 22456 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.05E-5, duration(nanos)=80500.0, startTimeNanos=115893819079700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1a3b434f'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@14fcbe78} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"3460ae22-20bc-49e2-9343-6216cdbe19a9", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"108", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54972"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:32:38.536+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:32:38.536+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0169158, duration(nanos)=1.69158E7, startTimeNanos=115893819079700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1a3b434f'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@14fcbe78}
2025-06-27T19:32:44.568+07:00 DEBUG 22456 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:32:44.569+07:00 DEBUG 22456 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/register] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:32:44.569+07:00 DEBUG 22456 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [6572fee4] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@1050395e
2025-06-27T19:32:44.569+07:00 DEBUG 22456 --- [api-gateway] [parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2d172c7}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@26c6288d}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@3e8afc2d}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@614cd187}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@e895e3e}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@115ef673}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@77476fcf}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6802d023}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@58583a2d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@8ce3f27}, order = 2147483647]]
2025-06-27T19:32:44.569+07:00 DEBUG 22456 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"fdd8f500-5a25-4efb-8679-179539785158", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54976"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:32:44.570+07:00 DEBUG 22456 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=6.78E-5, duration(nanos)=67800.0, startTimeNanos=115899869683500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4fa05564'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4167a2e0} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"fdd8f500-5a25-4efb-8679-179539785158", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"107", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54976"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:32:44.584+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:32:44.585+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/register'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.014519, duration(nanos)=1.4519E7, startTimeNanos=115899869683500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4fa05564'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4167a2e0}
2025-06-27T19:33:07.782+07:00 DEBUG 22456 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:33:07.782+07:00 DEBUG 22456 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/sendotp] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:33:07.782+07:00 DEBUG 22456 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [601a0f23] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@1050395e
2025-06-27T19:33:07.782+07:00 DEBUG 22456 --- [api-gateway] [parallel-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2d172c7}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@26c6288d}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@3e8afc2d}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@614cd187}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@e895e3e}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@115ef673}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@77476fcf}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6802d023}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@58583a2d}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@8ce3f27}, order = 2147483647]]
2025-06-27T19:33:07.783+07:00 DEBUG 22456 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"d661156e-3c03-495e-86a5-b9752a1a581f", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"43", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54984"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:33:07.783+07:00 DEBUG 22456 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=6.22E-5, duration(nanos)=62200.0, startTimeNanos=115923082815700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@8f4293f'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@396767d9} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"d661156e-3c03-495e-86a5-b9752a1a581f", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"43", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:54984"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:33:07.801+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-6] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:33:07.801+07:00 DEBUG 22456 --- [api-gateway] [reactor-http-nio-6] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.018863, duration(nanos)=1.8863E7, startTimeNanos=115923082815700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@8f4293f'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@396767d9}
2025-06-27T19:36:36.935+07:00  INFO 25252 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.12 with PID 25252 (C:\Users\-MSI-\IdeaProjects\Library-Project\api-gateway\target\classes started by -MSI- in C:\Users\-MSI-\IdeaProjects\Library-Project)
2025-06-27T19:36:36.938+07:00 DEBUG 25252 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T19:36:36.939+07:00  INFO 25252 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T19:36:37.718+07:00  INFO 25252 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T19:36:37.720+07:00  INFO 25252 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T19:36:37.744+07:00  INFO 25252 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-06-27T19:36:37.879+07:00  INFO 25252 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=9f8a3920-48d3-3486-857b-659d8249f867
2025-06-27T19:36:38.097+07:00  INFO 25252 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T19:36:38.104+07:00  INFO 25252 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T19:36:38.104+07:00  INFO 25252 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T19:36:38.362+07:00  INFO 25252 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 12845e98-f240-4dcb-90a3-31e765ca5374

2025-06-27T19:36:39.109+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T19:36:39.159+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T19:36:39.160+07:00  INFO 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T19:36:39.453+07:00  INFO 25252 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T19:36:39.686+07:00  INFO 25252 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-27T19:36:39.950+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T19:36:39.962+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T19:36:39.965+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T19:36:39.972+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T19:36:39.973+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T19:36:39.973+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T19:36:39.974+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T19:36:39.974+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T19:36:39.974+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T19:36:39.975+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthentication
2025-06-27T19:36:39.975+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T19:36:39.975+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T19:36:39.977+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T19:36:39.977+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T19:36:39.977+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T19:36:39.977+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T19:36:39.978+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T19:36:39.978+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T19:36:39.978+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T19:36:39.978+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T19:36:39.978+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T19:36:39.979+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T19:36:39.979+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T19:36:39.979+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T19:36:39.979+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthentication
2025-06-27T19:36:39.980+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T19:36:39.980+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T19:36:39.980+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T19:36:39.980+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthentication
2025-06-27T19:36:39.980+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T19:36:39.983+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T19:36:39.983+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T19:36:39.984+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthentication
2025-06-27T19:36:39.984+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T19:36:39.989+07:00 DEBUG 25252 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T19:36:39.990+07:00  INFO 25252 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 3.691 seconds (process running for 4.523)
2025-06-27T19:36:40.597+07:00  WARN 25252 --- [api-gateway] [lettuce-nioEventLoop-4-1] o.s.b.a.d.r.RedisReactiveHealthIndicator : Redis health check failed

org.springframework.data.redis.RedisSystemException: Cannot read Redis info
	at org.springframework.data.redis.connection.convert.Converters.toProperties(Converters.java:113) ~[spring-data-redis-3.2.0.jar:3.2.0]
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:250) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.6.0.jar:3.6.0]
	at io.lettuce.core.RedisPublisher$ImmediateSubscriber.onNext(RedisPublisher.java:890) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.RedisPublisher$RedisSubscription.onNext(RedisPublisher.java:291) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.RedisPublisher$SubscriptionCommand.doOnComplete(RedisPublisher.java:777) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:65) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: java.lang.IllegalArgumentException: Malformed \uxxxx encoding.
	at java.base/java.util.Properties.loadConvert(Properties.java:662) ~[na:na]
	at java.base/java.util.Properties.load0(Properties.java:456) ~[na:na]
	at java.base/java.util.Properties.load(Properties.java:382) ~[na:na]
	at org.springframework.data.redis.connection.convert.Converters.toProperties(Converters.java:111) ~[spring-data-redis-3.2.0.jar:3.2.0]
	... 28 common frames omitted

2025-06-27T19:36:47.735+07:00 DEBUG 25252 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:36:47.735+07:00 DEBUG 25252 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/sendotp] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:36:47.735+07:00 DEBUG 25252 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [69dba05] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@52a383d0
2025-06-27T19:36:47.737+07:00 DEBUG 25252 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:36:47.749+07:00 DEBUG 25252 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"3c10d90e-8ca3-40a3-81f5-f3208511de90", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"43", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55063"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:36:47.753+07:00 DEBUG 25252 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@152a0a2e', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.062E-4, duration(nanos)=706200.0, startTimeNanos=116143051610900}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@438f5c62} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"3c10d90e-8ca3-40a3-81f5-f3208511de90", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"43", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55063"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:36:48.161+07:00 DEBUG 25252 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:36:48.162+07:00 DEBUG 25252 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@152a0a2e', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.4094571, duration(nanos)=4.094571E8, startTimeNanos=116143051610900}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@438f5c62}
2025-06-27T19:37:22.082+07:00  INFO 12700 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.12 with PID 12700 (C:\Users\-MSI-\IdeaProjects\Library-Project\api-gateway\target\classes started by -MSI- in C:\Users\-MSI-\IdeaProjects\Library-Project)
2025-06-27T19:37:22.083+07:00 DEBUG 12700 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T19:37:22.083+07:00  INFO 12700 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T19:37:22.783+07:00  INFO 12700 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T19:37:22.786+07:00  INFO 12700 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T19:37:22.809+07:00  INFO 12700 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-06-27T19:37:22.945+07:00  INFO 12700 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=9f8a3920-48d3-3486-857b-659d8249f867
2025-06-27T19:37:23.133+07:00  INFO 12700 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T19:37:23.140+07:00  INFO 12700 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T19:37:23.140+07:00  INFO 12700 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T19:37:23.391+07:00  INFO 12700 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 8eb76fb1-35f1-46dd-8927-4eb41a85296f

2025-06-27T19:37:24.065+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T19:37:24.113+07:00  INFO 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T19:37:24.387+07:00  INFO 12700 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T19:37:24.593+07:00  INFO 12700 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-27T19:37:24.855+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T19:37:24.864+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T19:37:24.866+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T19:37:24.872+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T19:37:24.873+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T19:37:24.873+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T19:37:24.874+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T19:37:24.875+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T19:37:24.875+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T19:37:24.875+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthentication
2025-06-27T19:37:24.876+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T19:37:24.876+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T19:37:24.877+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T19:37:24.878+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T19:37:24.878+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T19:37:24.878+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T19:37:24.879+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T19:37:24.879+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T19:37:24.879+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T19:37:24.879+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T19:37:24.880+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T19:37:24.880+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T19:37:24.880+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T19:37:24.880+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T19:37:24.881+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthentication
2025-06-27T19:37:24.881+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T19:37:24.881+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T19:37:24.881+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T19:37:24.882+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthentication
2025-06-27T19:37:24.882+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T19:37:24.885+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T19:37:24.885+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T19:37:24.886+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthentication
2025-06-27T19:37:24.886+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T19:37:24.890+07:00 DEBUG 12700 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T19:37:24.892+07:00  INFO 12700 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 3.396 seconds (process running for 3.922)
2025-06-27T19:37:25.511+07:00  WARN 12700 --- [api-gateway] [lettuce-nioEventLoop-4-1] o.s.b.a.d.r.RedisReactiveHealthIndicator : Redis health check failed

org.springframework.data.redis.RedisSystemException: Cannot read Redis info
	at org.springframework.data.redis.connection.convert.Converters.toProperties(Converters.java:113) ~[spring-data-redis-3.2.0.jar:3.2.0]
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:250) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.6.0.jar:3.6.0]
	at io.lettuce.core.RedisPublisher$ImmediateSubscriber.onNext(RedisPublisher.java:890) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.RedisPublisher$RedisSubscription.onNext(RedisPublisher.java:291) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.RedisPublisher$SubscriptionCommand.doOnComplete(RedisPublisher.java:777) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:65) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: java.lang.IllegalArgumentException: Malformed \uxxxx encoding.
	at java.base/java.util.Properties.loadConvert(Properties.java:662) ~[na:na]
	at java.base/java.util.Properties.load0(Properties.java:456) ~[na:na]
	at java.base/java.util.Properties.load(Properties.java:382) ~[na:na]
	at org.springframework.data.redis.connection.convert.Converters.toProperties(Converters.java:111) ~[spring-data-redis-3.2.0.jar:3.2.0]
	... 28 common frames omitted

2025-06-27T19:37:29.400+07:00 DEBUG 12700 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:37:29.400+07:00 DEBUG 12700 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/sendotp] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:37:29.400+07:00 DEBUG 12700 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [9b2614] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@562041e2
2025-06-27T19:37:29.400+07:00 DEBUG 12700 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:37:29.412+07:00 DEBUG 12700 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"296361e1-d735-4c99-8ff6-0ac6f965da02", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"43", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55113"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:37:29.415+07:00 DEBUG 12700 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=6.712E-4, duration(nanos)=671200.0, startTimeNanos=116184714502000}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@37af87b6'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7391f102} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"296361e1-d735-4c99-8ff6-0ac6f965da02", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"43", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55113"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:37:29.799+07:00 DEBUG 12700 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:37:29.799+07:00 DEBUG 12700 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.383934, duration(nanos)=3.83934E8, startTimeNanos=116184714502000}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@37af87b6'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7391f102}
2025-06-27T19:38:27.093+07:00  INFO 24088 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.12 with PID 24088 (C:\Users\-MSI-\IdeaProjects\Library-Project\api-gateway\target\classes started by -MSI- in C:\Users\-MSI-\IdeaProjects\Library-Project)
2025-06-27T19:38:27.095+07:00 DEBUG 24088 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T19:38:27.095+07:00  INFO 24088 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T19:38:28.017+07:00  INFO 24088 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T19:38:28.019+07:00  INFO 24088 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T19:38:28.051+07:00  INFO 24088 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-06-27T19:38:28.217+07:00  INFO 24088 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=9f8a3920-48d3-3486-857b-659d8249f867
2025-06-27T19:38:28.478+07:00  INFO 24088 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T19:38:28.488+07:00  INFO 24088 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T19:38:28.488+07:00  INFO 24088 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T19:38:28.812+07:00  INFO 16720 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.12 with PID 16720 (C:\Users\-MSI-\IdeaProjects\Library-Project\api-gateway\target\classes started by -MSI- in C:\Users\-MSI-\IdeaProjects\Library-Project)
2025-06-27T19:38:28.813+07:00 DEBUG 16720 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T19:38:28.814+07:00  INFO 16720 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T19:38:28.836+07:00  INFO 24088 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 40a73aa4-3255-4018-934f-3ebfd142c8e6

2025-06-27T19:38:29.602+07:00  INFO 16720 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T19:38:29.605+07:00  INFO 16720 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T19:38:29.632+07:00  INFO 16720 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
2025-06-27T19:38:29.634+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T19:38:29.699+07:00  INFO 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T19:38:29.809+07:00  INFO 16720 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=9f8a3920-48d3-3486-857b-659d8249f867
2025-06-27T19:38:30.005+07:00  INFO 16720 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T19:38:30.012+07:00  INFO 16720 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T19:38:30.012+07:00  INFO 16720 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T19:38:30.012+07:00  INFO 24088 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T19:38:30.242+07:00  INFO 24088 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-27T19:38:30.300+07:00  INFO 16720 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 028ad0ac-9e34-4232-bbf0-f2a9cb0e27e2

2025-06-27T19:38:30.559+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T19:38:30.574+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T19:38:30.580+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T19:38:30.594+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T19:38:30.595+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T19:38:30.596+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T19:38:30.598+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T19:38:30.600+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T19:38:30.603+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T19:38:30.604+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthentication
2025-06-27T19:38:30.606+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T19:38:30.606+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T19:38:30.607+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T19:38:30.608+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T19:38:30.608+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T19:38:30.610+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T19:38:30.611+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T19:38:30.611+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T19:38:30.612+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T19:38:30.613+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T19:38:30.613+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T19:38:30.614+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T19:38:30.614+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T19:38:30.615+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T19:38:30.615+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthentication
2025-06-27T19:38:30.616+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T19:38:30.616+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T19:38:30.617+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T19:38:30.619+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthentication
2025-06-27T19:38:30.620+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T19:38:30.625+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T19:38:30.627+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T19:38:30.628+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthentication
2025-06-27T19:38:30.628+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T19:38:30.648+07:00 DEBUG 24088 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T19:38:30.650+07:00  INFO 24088 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 4.142 seconds (process running for 5.01)
2025-06-27T19:38:31.259+07:00 DEBUG 16720 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T19:38:31.277+07:00  WARN 24088 --- [api-gateway] [lettuce-nioEventLoop-4-1] o.s.b.a.d.r.RedisReactiveHealthIndicator : Redis health check failed

org.springframework.data.redis.RedisSystemException: Cannot read Redis info
	at org.springframework.data.redis.connection.convert.Converters.toProperties(Converters.java:113) ~[spring-data-redis-3.2.0.jar:3.2.0]
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:250) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.6.0.jar:3.6.0]
	at io.lettuce.core.RedisPublisher$ImmediateSubscriber.onNext(RedisPublisher.java:890) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.RedisPublisher$RedisSubscription.onNext(RedisPublisher.java:291) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.RedisPublisher$SubscriptionCommand.doOnComplete(RedisPublisher.java:777) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:65) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: java.lang.IllegalArgumentException: Malformed \uxxxx encoding.
	at java.base/java.util.Properties.loadConvert(Properties.java:662) ~[na:na]
	at java.base/java.util.Properties.load0(Properties.java:456) ~[na:na]
	at java.base/java.util.Properties.load(Properties.java:382) ~[na:na]
	at org.springframework.data.redis.connection.convert.Converters.toProperties(Converters.java:111) ~[spring-data-redis-3.2.0.jar:3.2.0]
	... 28 common frames omitted

2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T19:38:31.347+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T19:38:31.348+07:00  INFO 16720 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T19:38:31.817+07:00  INFO 16720 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T19:38:32.074+07:00  WARN 16720 --- [api-gateway] [main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-06-27T19:38:41.583+07:00 DEBUG 24088 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:38:41.583+07:00 DEBUG 24088 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/sendotp] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:38:41.583+07:00 DEBUG 24088 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [11fba5d9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:38:41.584+07:00 DEBUG 24088 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:38:41.595+07:00 DEBUG 24088 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c9c30777-b81b-4cb3-9828-2ee28514b9ed", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"43", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55182"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:38:41.599+07:00 DEBUG 24088 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@67331794', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=6.374E-4, duration(nanos)=637400.0, startTimeNanos=116256897740000}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@51d90127} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c9c30777-b81b-4cb3-9828-2ee28514b9ed", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"43", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55182"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:38:41.967+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:38:41.967+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@67331794', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.3696053, duration(nanos)=3.696053E8, startTimeNanos=116256897740000}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@51d90127}
2025-06-27T19:38:49.273+07:00 DEBUG 24088 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:38:49.273+07:00 DEBUG 24088 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/sendotp] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:38:49.273+07:00 DEBUG 24088 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [4a2d378] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:38:49.273+07:00 DEBUG 24088 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:38:49.274+07:00 DEBUG 24088 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"e509ee45-d79b-4947-a34a-43208a524a08", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"44", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55182"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:38:49.276+07:00 DEBUG 24088 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@348d9e8a', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.532E-4, duration(nanos)=153200.0, startTimeNanos=116264574711300}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3a4a766b} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"e509ee45-d79b-4947-a34a-43208a524a08", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"44", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55182"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:38:53.643+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:38:53.644+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/sendotp'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@348d9e8a', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=4.3689668, duration(nanos)=4.3689668E9, startTimeNanos=116264574711300}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3a4a766b}
2025-06-27T19:39:23.298+07:00 DEBUG 24088 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:39:23.298+07:00 DEBUG 24088 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/active] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:39:23.299+07:00 DEBUG 24088 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [299d162d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:39:23.299+07:00 DEBUG 24088 --- [api-gateway] [parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:39:23.299+07:00 DEBUG 24088 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"347be311-359e-4edc-b99c-0b4801652686", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"63", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55182"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:39:23.300+07:00 DEBUG 24088 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/active'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5e06d45e', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.69E-5, duration(nanos)=76900.0, startTimeNanos=116298599289200}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@50c121ee} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"347be311-359e-4edc-b99c-0b4801652686", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"63", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55182"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:39:23.312+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:39:23.312+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/active'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5e06d45e', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0125493, duration(nanos)=1.25493E7, startTimeNanos=116298599289200}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@50c121ee}
2025-06-27T19:39:39.722+07:00 DEBUG 24088 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:39:39.723+07:00 DEBUG 24088 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/active] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:39:39.723+07:00 DEBUG 24088 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [1745e111] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:39:39.723+07:00 DEBUG 24088 --- [api-gateway] [parallel-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:39:39.724+07:00 DEBUG 24088 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"3fd7a982-f25d-49fd-832a-f727031697b5", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55296"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:39:39.724+07:00 DEBUG 24088 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/active'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@282dc3b0', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.43E-5, duration(nanos)=84300.0, startTimeNanos=116315024252800}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@26ea38c5} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"3fd7a982-f25d-49fd-832a-f727031697b5", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55296"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:39:39.782+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:39:39.782+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/active'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@282dc3b0', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0575742, duration(nanos)=5.75742E7, startTimeNanos=116315024252800}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@26ea38c5}
2025-06-27T19:39:46.030+07:00 DEBUG 24088 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:39:46.030+07:00 DEBUG 24088 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/active] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:39:46.030+07:00 DEBUG 24088 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [48390491] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:39:46.030+07:00 DEBUG 24088 --- [api-gateway] [parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:39:46.031+07:00 DEBUG 24088 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"873dd071-164a-4b54-8bd9-6eb3787c442b", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55296"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:39:46.031+07:00 DEBUG 24088 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/active'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6cca654', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.64E-5, duration(nanos)=56400.0, startTimeNanos=116321330785400}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@80b48fd} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"873dd071-164a-4b54-8bd9-6eb3787c442b", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55296"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:39:46.039+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:39:46.039+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/active'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6cca654', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0081156, duration(nanos)=8115600.0, startTimeNanos=116321330785400}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@80b48fd}
2025-06-27T19:40:40.751+07:00 DEBUG 24088 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:40:40.751+07:00 DEBUG 24088 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:40:40.751+07:00 DEBUG 24088 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [a653d9c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:40:40.751+07:00 DEBUG 24088 --- [api-gateway] [parallel-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:40:40.751+07:00 DEBUG 24088 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"9808909c-20d7-4c5e-bbdf-9fc7c4582ccc", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55372"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:40:40.753+07:00 DEBUG 24088 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@50ae72e1', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=6.15E-5, duration(nanos)=61500.0, startTimeNanos=116376052055000}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5e698684} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"9808909c-20d7-4c5e-bbdf-9fc7c4582ccc", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55372"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:40:40.770+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:40:40.771+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@50ae72e1', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0183223, duration(nanos)=1.83223E7, startTimeNanos=116376052055000}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5e698684}
2025-06-27T19:40:45.189+07:00 DEBUG 24088 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:40:45.189+07:00 DEBUG 24088 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:40:45.189+07:00 DEBUG 24088 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [275afd6e] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:40:45.189+07:00 DEBUG 24088 --- [api-gateway] [parallel-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:40:45.190+07:00 DEBUG 24088 --- [api-gateway] [parallel-7] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"822d653c-f16f-4038-9d92-474ff5ae8a67", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"67", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55372"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:40:45.190+07:00 DEBUG 24088 --- [api-gateway] [parallel-7] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4c19867c', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.141E-4, duration(nanos)=114100.0, startTimeNanos=116380489520900}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@42de618f} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"822d653c-f16f-4038-9d92-474ff5ae8a67", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"67", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55372"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:40:45.287+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:40:45.287+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4c19867c', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0974807, duration(nanos)=9.74807E7, startTimeNanos=116380489520900}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@42de618f}
2025-06-27T19:40:47.339+07:00 DEBUG 24088 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:40:47.339+07:00 DEBUG 24088 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:40:47.339+07:00 DEBUG 24088 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [601a0f23] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:40:47.339+07:00 DEBUG 24088 --- [api-gateway] [parallel-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:40:47.339+07:00 DEBUG 24088 --- [api-gateway] [parallel-8] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"f39bac77-3ffa-4d3d-a50e-84c88bfbbd0c", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55372"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:40:47.340+07:00 DEBUG 24088 --- [api-gateway] [parallel-8] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@44e9df3c', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.79E-5, duration(nanos)=57900.0, startTimeNanos=116382638693200}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4a2e29d1} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"f39bac77-3ffa-4d3d-a50e-84c88bfbbd0c", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55372"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:40:47.348+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:40:47.349+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@44e9df3c', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0101176, duration(nanos)=1.01176E7, startTimeNanos=116382638693200}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4a2e29d1}
2025-06-27T19:41:25.607+07:00 DEBUG 24088 --- [api-gateway] [parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:41:25.609+07:00 DEBUG 24088 --- [api-gateway] [parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:41:25.609+07:00 DEBUG 24088 --- [api-gateway] [parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [7e8a1f44] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:41:25.609+07:00 DEBUG 24088 --- [api-gateway] [parallel-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:41:25.610+07:00 DEBUG 24088 --- [api-gateway] [parallel-9] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"743312c6-030e-4f2a-95f3-fd42c416d015", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55372"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:41:25.610+07:00 DEBUG 24088 --- [api-gateway] [parallel-9] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4a8414a8', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.387E-4, duration(nanos)=138700.0, startTimeNanos=116420909750100}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4443e388} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"743312c6-030e-4f2a-95f3-fd42c416d015", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55372"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:41:25.731+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:41:25.732+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4a8414a8', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.1217287, duration(nanos)=1.217287E8, startTimeNanos=116420909750100}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4443e388}
2025-06-27T19:41:29.485+07:00 DEBUG 24088 --- [api-gateway] [parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:41:29.485+07:00 DEBUG 24088 --- [api-gateway] [parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:41:29.485+07:00 DEBUG 24088 --- [api-gateway] [parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [197567a3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:41:29.485+07:00 DEBUG 24088 --- [api-gateway] [parallel-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:41:29.486+07:00 DEBUG 24088 --- [api-gateway] [parallel-10] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"f2b99374-e6b1-4168-b7e5-b99bdfbbbc64", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"67", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55421"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:41:29.486+07:00 DEBUG 24088 --- [api-gateway] [parallel-10] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@43b91915', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=9.28E-5, duration(nanos)=92800.0, startTimeNanos=116424785990300}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4d7eff12} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"f2b99374-e6b1-4168-b7e5-b99bdfbbbc64", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"67", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55421"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:41:29.640+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:41:29.640+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@43b91915', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.1543192, duration(nanos)=1.543192E8, startTimeNanos=116424785990300}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4d7eff12}
2025-06-27T19:41:32.715+07:00 DEBUG 24088 --- [api-gateway] [parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:41:32.715+07:00 DEBUG 24088 --- [api-gateway] [parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:41:32.715+07:00 DEBUG 24088 --- [api-gateway] [parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [431ea130] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:41:32.716+07:00 DEBUG 24088 --- [api-gateway] [parallel-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:41:32.717+07:00 DEBUG 24088 --- [api-gateway] [parallel-11] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"cbcaad81-acac-4d3b-9269-7947bbd0a50e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55421"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:41:32.717+07:00 DEBUG 24088 --- [api-gateway] [parallel-11] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6bd54b71', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=9.16E-5, duration(nanos)=91600.0, startTimeNanos=116428016506500}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@6512b87b} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"cbcaad81-acac-4d3b-9269-7947bbd0a50e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55421"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:41:32.729+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:41:32.729+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6bd54b71', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0128519, duration(nanos)=1.28519E7, startTimeNanos=116428016506500}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@6512b87b}
2025-06-27T19:41:47.909+07:00 DEBUG 24088 --- [api-gateway] [parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:41:47.909+07:00 DEBUG 24088 --- [api-gateway] [parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:41:47.909+07:00 DEBUG 24088 --- [api-gateway] [parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [5812bb31] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@499d6570
2025-06-27T19:41:47.909+07:00 DEBUG 24088 --- [api-gateway] [parallel-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@77476fcf}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@a7ae340}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@e895e3e}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@4a41caed}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@7404aff2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@70805849}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@12723c5d}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6b4fd7d}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6802d023}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@e7d0db2}, order = 2147483647]]
2025-06-27T19:41:47.910+07:00 DEBUG 24088 --- [api-gateway] [parallel-12] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"6ac48302-f1d3-4323-b532-3090f9616bf2", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55421"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:41:47.910+07:00 DEBUG 24088 --- [api-gateway] [parallel-12] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@53d61e1d', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.18E-5, duration(nanos)=51800.0, startTimeNanos=116443209766600}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5d11ea17} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"6ac48302-f1d3-4323-b532-3090f9616bf2", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55421"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:41:47.919+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:41:47.919+07:00 DEBUG 24088 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@53d61e1d', class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0086253, duration(nanos)=8625300.0, startTimeNanos=116443209766600}'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5d11ea17}
2025-06-27T19:43:30.496+07:00  INFO 20436 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.12 with PID 20436 (C:\Users\-MSI-\IdeaProjects\Library-Project\api-gateway\target\classes started by -MSI- in C:\Users\-MSI-\IdeaProjects\Library-Project)
2025-06-27T19:43:30.498+07:00 DEBUG 20436 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T19:43:30.498+07:00  INFO 20436 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T19:43:31.186+07:00  INFO 20436 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T19:43:31.188+07:00  INFO 20436 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T19:43:31.210+07:00  INFO 20436 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2025-06-27T19:43:31.341+07:00  INFO 20436 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=9f8a3920-48d3-3486-857b-659d8249f867
2025-06-27T19:43:31.529+07:00  INFO 20436 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T19:43:31.536+07:00  INFO 20436 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T19:43:31.536+07:00  INFO 20436 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T19:43:31.801+07:00  INFO 20436 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 40c8f1c0-a22b-4524-8d41-008f8bad35b0

2025-06-27T19:43:32.460+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T19:43:32.510+07:00  INFO 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T19:43:32.796+07:00  INFO 20436 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T19:43:33.012+07:00  INFO 20436 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-27T19:43:33.276+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T19:43:33.284+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T19:43:33.286+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T19:43:33.292+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T19:43:33.293+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T19:43:33.293+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T19:43:33.294+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T19:43:33.294+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T19:43:33.294+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T19:43:33.295+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthentication
2025-06-27T19:43:33.295+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T19:43:33.295+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T19:43:33.296+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T19:43:33.296+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T19:43:33.296+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T19:43:33.296+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T19:43:33.297+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T19:43:33.297+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T19:43:33.297+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T19:43:33.298+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T19:43:33.298+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T19:43:33.298+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T19:43:33.298+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T19:43:33.299+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T19:43:33.299+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthentication
2025-06-27T19:43:33.299+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T19:43:33.299+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T19:43:33.299+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T19:43:33.300+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthentication
2025-06-27T19:43:33.300+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T19:43:33.303+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T19:43:33.303+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T19:43:33.304+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthentication
2025-06-27T19:43:33.304+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T19:43:33.308+07:00 DEBUG 20436 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T19:43:33.310+07:00  INFO 20436 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 3.405 seconds (process running for 4.018)
2025-06-27T19:43:33.911+07:00  WARN 20436 --- [api-gateway] [lettuce-nioEventLoop-4-1] o.s.b.a.d.r.RedisReactiveHealthIndicator : Redis health check failed

org.springframework.data.redis.RedisSystemException: Cannot read Redis info
	at org.springframework.data.redis.connection.convert.Converters.toProperties(Converters.java:113) ~[spring-data-redis-3.2.0.jar:3.2.0]
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:250) ~[reactor-core-3.6.0.jar:3.6.0]
	at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.6.0.jar:3.6.0]
	at io.lettuce.core.RedisPublisher$ImmediateSubscriber.onNext(RedisPublisher.java:890) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.RedisPublisher$RedisSubscription.onNext(RedisPublisher.java:291) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.RedisPublisher$SubscriptionCommand.doOnComplete(RedisPublisher.java:777) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:65) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597) ~[lettuce-core-6.3.0.RELEASE.jar:6.3.0.RELEASE/9bb1669]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.101.Final.jar:4.1.101.Final]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: java.lang.IllegalArgumentException: Malformed \uxxxx encoding.
	at java.base/java.util.Properties.loadConvert(Properties.java:662) ~[na:na]
	at java.base/java.util.Properties.load0(Properties.java:456) ~[na:na]
	at java.base/java.util.Properties.load(Properties.java:382) ~[na:na]
	at org.springframework.data.redis.connection.convert.Converters.toProperties(Converters.java:111) ~[spring-data-redis-3.2.0.jar:3.2.0]
	... 28 common frames omitted

2025-06-27T19:43:39.135+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:43:39.135+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:43:39.135+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [6af78a3d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:43:39.136+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:43:39.148+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"a9f30699-a306-4341-8a7f-ecf3a53b215e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55571"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:43:39.154+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.338E-4, duration(nanos)=733800.0, startTimeNanos=116554452493300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1a0e0709'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@46f454cb} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"a9f30699-a306-4341-8a7f-ecf3a53b215e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55571"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:43:39.539+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:43:39.539+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.3871913, duration(nanos)=3.871913E8, startTimeNanos=116554452493300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1a0e0709'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@46f454cb}
2025-06-27T19:43:43.159+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:43:43.159+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:43:43.159+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [6572fee4] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:43:43.160+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:43:43.161+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"1300ea31-361c-4dca-ada0-f77b5260f212", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"67", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55571"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:43:43.161+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=9.63E-5, duration(nanos)=96300.0, startTimeNanos=116558461573900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@78be5626'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7679b741} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"1300ea31-361c-4dca-ada0-f77b5260f212", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"67", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55571"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:43:43.899+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:43:43.900+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.7380645, duration(nanos)=7.380645E8, startTimeNanos=116558461573900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@78be5626'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@7679b741}
2025-06-27T19:44:30.509+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:44:30.509+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/change-password] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:44:30.509+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [6db36707] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:44:30.510+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:44:30.511+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"ab939442-5634-4975-b443-8577b4390027", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"113", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55571"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:44:30.512+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.2E-4, duration(nanos)=220000.0, startTimeNanos=116605811490500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1e487113'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5b44d45b} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"ab939442-5634-4975-b443-8577b4390027", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"113", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55571"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:44:30.538+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:44:30.538+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0261612, duration(nanos)=2.61612E7, startTimeNanos=116605811490500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1e487113'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5b44d45b}
2025-06-27T19:44:38.492+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:44:38.492+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/change-password] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:44:38.492+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [197567a3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:44:38.493+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:44:38.493+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjY1YjMwM2MzLTM3YzgtNGExNS05MzkxLTlkZTljYWFjMmEzNiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjgyMjMsImV4cCI6MTc1MTAyOTEyM30.IsNMGucE5J3tcZgRkMAZGNjigxFu7O0Ny9JF7svGj8WD-dwjbxwpI4Pf3Kn4HGHc3m8J9fZktttY2XGbnhGRvXGKOZLrL_x0046KGTW1kfDNYMFcnePcO6H9DVtKc6BDArQS2Xli-7nRmZC9Voo1iFTDEt_7ale4ItStNLHJUfH0YKs2KUWisWgXTmk4OchVWRVl__76bWzGJJBF2btoeGgGO93owiQPaLxD8zA0hUZiv8qeafr8FSssksCSCrO5egrbr1G8zrjBpidcA5ELboUxI_xmPs_FgvZuPZHJAePyhfP0QEsi-mAoqAWE1DNdyKACXJBzIHVMrTwwOMYdnA", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"3287b160-da08-4cab-a23f-e41b3536f056", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"113", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55571"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:44:38.494+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.581E-4, duration(nanos)=158100.0, startTimeNanos=116613793761400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5795e6a5'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@59520227} created for the request. New headers are [content-type:"application/json", authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjY1YjMwM2MzLTM3YzgtNGExNS05MzkxLTlkZTljYWFjMmEzNiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjgyMjMsImV4cCI6MTc1MTAyOTEyM30.IsNMGucE5J3tcZgRkMAZGNjigxFu7O0Ny9JF7svGj8WD-dwjbxwpI4Pf3Kn4HGHc3m8J9fZktttY2XGbnhGRvXGKOZLrL_x0046KGTW1kfDNYMFcnePcO6H9DVtKc6BDArQS2Xli-7nRmZC9Voo1iFTDEt_7ale4ItStNLHJUfH0YKs2KUWisWgXTmk4OchVWRVl__76bWzGJJBF2btoeGgGO93owiQPaLxD8zA0hUZiv8qeafr8FSssksCSCrO5egrbr1G8zrjBpidcA5ELboUxI_xmPs_FgvZuPZHJAePyhfP0QEsi-mAoqAWE1DNdyKACXJBzIHVMrTwwOMYdnA", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"3287b160-da08-4cab-a23f-e41b3536f056", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"113", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55571"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:44:38.854+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:44:38.855+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.3605045, duration(nanos)=3.605045E8, startTimeNanos=116613793761400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5795e6a5'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@59520227}
2025-06-27T19:45:05.758+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:45:05.759+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/change-password] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:45:05.759+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [9a59171] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:45:05.759+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:45:05.759+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"888fd35d-9467-46c3-96cb-43c08fa5ff24", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"112", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55571"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:45:05.760+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=6.98E-5, duration(nanos)=69800.0, startTimeNanos=116641059592300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@790e9ebb'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@77c96fea} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"888fd35d-9467-46c3-96cb-43c08fa5ff24", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"112", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55571"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:45:05.763+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:45:05.764+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0040459, duration(nanos)=4045900.0, startTimeNanos=116641059592300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@790e9ebb'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@77c96fea}
2025-06-27T19:47:51.087+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:47:51.087+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:47:51.087+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [6bb50c3a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:47:51.087+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:47:51.088+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"8a2f106f-0cc7-461b-837f-a52f9370b269", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55714"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:47:51.088+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.266E-4, duration(nanos)=126600.0, startTimeNanos=116806388109300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@46a74743'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4860b1e7} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"8a2f106f-0cc7-461b-837f-a52f9370b269", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"66", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55714"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:47:51.110+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:47:51.111+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0224685, duration(nanos)=2.24685E7, startTimeNanos=116806388109300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@46a74743'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4860b1e7}
2025-06-27T19:49:15.604+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:49:15.605+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/change-password] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:49:15.605+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [17b29afd] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:49:15.605+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:49:15.606+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"44d490e6-9076-4860-aae4-97a4c587a9b3", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"112", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:49:15.607+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=2.791E-4, duration(nanos)=279100.0, startTimeNanos=116890906010300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@50ae72e1'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5e698684} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"44d490e6-9076-4860-aae4-97a4c587a9b3", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"112", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:49:15.615+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:49:15.615+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0087675, duration(nanos)=8767500.0, startTimeNanos=116890906010300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@50ae72e1'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5e698684}
2025-06-27T19:49:20.256+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:49:20.256+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/change-password] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:49:20.256+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [7627e35] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:49:20.256+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:49:20.257+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjY1YjMwM2MzLTM3YzgtNGExNS05MzkxLTlkZTljYWFjMmEzNiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjgyMjMsImV4cCI6MTc1MTAyOTEyM30.IsNMGucE5J3tcZgRkMAZGNjigxFu7O0Ny9JF7svGj8WD-dwjbxwpI4Pf3Kn4HGHc3m8J9fZktttY2XGbnhGRvXGKOZLrL_x0046KGTW1kfDNYMFcnePcO6H9DVtKc6BDArQS2Xli-7nRmZC9Voo1iFTDEt_7ale4ItStNLHJUfH0YKs2KUWisWgXTmk4OchVWRVl__76bWzGJJBF2btoeGgGO93owiQPaLxD8zA0hUZiv8qeafr8FSssksCSCrO5egrbr1G8zrjBpidcA5ELboUxI_xmPs_FgvZuPZHJAePyhfP0QEsi-mAoqAWE1DNdyKACXJBzIHVMrTwwOMYdnA", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c69fbd89-f5d7-48ff-9064-8aa730402e54", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"112", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:49:20.257+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.019E-4, duration(nanos)=101900.0, startTimeNanos=116895556894900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4c19867c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@42de618f} created for the request. New headers are [content-type:"application/json", authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjY1YjMwM2MzLTM3YzgtNGExNS05MzkxLTlkZTljYWFjMmEzNiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjgyMjMsImV4cCI6MTc1MTAyOTEyM30.IsNMGucE5J3tcZgRkMAZGNjigxFu7O0Ny9JF7svGj8WD-dwjbxwpI4Pf3Kn4HGHc3m8J9fZktttY2XGbnhGRvXGKOZLrL_x0046KGTW1kfDNYMFcnePcO6H9DVtKc6BDArQS2Xli-7nRmZC9Voo1iFTDEt_7ale4ItStNLHJUfH0YKs2KUWisWgXTmk4OchVWRVl__76bWzGJJBF2btoeGgGO93owiQPaLxD8zA0hUZiv8qeafr8FSssksCSCrO5egrbr1G8zrjBpidcA5ELboUxI_xmPs_FgvZuPZHJAePyhfP0QEsi-mAoqAWE1DNdyKACXJBzIHVMrTwwOMYdnA", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c69fbd89-f5d7-48ff-9064-8aa730402e54", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"112", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:49:20.492+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:49:20.493+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/change-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.23584, duration(nanos)=2.3584E8, startTimeNanos=116895556894900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4c19867c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@42de618f}
2025-06-27T19:49:48.544+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:49:48.545+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/forgot-password] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:49:48.545+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [7d30c3f7] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:49:48.545+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:49:48.546+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjZiZjdmMDcyLTE4NTAtNGUyNS04ODU4LTNhMDc5NTM3N2I0ZCJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NDUxNTc3NTMsImV4cCI6MTc0NTE1ODY1M30.BbXgFs4siMqz-XNGxoHTKy2NcokrkMbmjEc9MmVaFmb7hQH-__DkJ8kM9trHkDtfzFsGE0tNbW70Vyl5kuxP1VaxrmL2nGukdpbbiIDN72pnx2avT1IKBKycfmYLO4ehGBFVx8VuhFc96bWdB6lpGklo_AyWOFIFoie0Up9Niaq8hk9jK0YuPeIK5WxJqTXhluhOwGJxlzqjJqd7avsd33I7EYMWB-O7Lo0HjFZ_v5Ff6odOYqGgOJCN9ZiPRpGDjwqKgwUuPkIxPl9Nldd6m7sxPFZFFLDEpFhbFFbgT0CLeilB6lWRQ3ehk5rWBq0E6dW20j1bAcczwqNhBO2d-w", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"5043c96a-c894-4757-a73f-843c15473d08", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"45", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:49:48.547+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/forgot-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.186E-4, duration(nanos)=118600.0, startTimeNanos=116923846507600}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@44e9df3c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4a2e29d1} created for the request. New headers are [content-type:"application/json", authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjZiZjdmMDcyLTE4NTAtNGUyNS04ODU4LTNhMDc5NTM3N2I0ZCJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NDUxNTc3NTMsImV4cCI6MTc0NTE1ODY1M30.BbXgFs4siMqz-XNGxoHTKy2NcokrkMbmjEc9MmVaFmb7hQH-__DkJ8kM9trHkDtfzFsGE0tNbW70Vyl5kuxP1VaxrmL2nGukdpbbiIDN72pnx2avT1IKBKycfmYLO4ehGBFVx8VuhFc96bWdB6lpGklo_AyWOFIFoie0Up9Niaq8hk9jK0YuPeIK5WxJqTXhluhOwGJxlzqjJqd7avsd33I7EYMWB-O7Lo0HjFZ_v5Ff6odOYqGgOJCN9ZiPRpGDjwqKgwUuPkIxPl9Nldd6m7sxPFZFFLDEpFhbFFbgT0CLeilB6lWRQ3ehk5rWBq0E6dW20j1bAcczwqNhBO2d-w", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"5043c96a-c894-4757-a73f-843c15473d08", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"45", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:49:52.118+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:49:52.118+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/forgot-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=3.5710911, duration(nanos)=3.5710911E9, startTimeNanos=116923846507600}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@44e9df3c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@4a2e29d1}
2025-06-27T19:49:58.401+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:49:58.401+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/forgot-password] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:49:58.401+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [2a880601] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:49:58.401+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:49:58.402+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"9c22c5d2-9f80-4f3a-9a7e-cd073b1480aa", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"45", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:49:58.402+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/forgot-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.75E-5, duration(nanos)=87500.0, startTimeNanos=116933701984200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5a06de30'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@54c13b00} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"9c22c5d2-9f80-4f3a-9a7e-cd073b1480aa", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"45", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:50:01.552+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:50:01.553+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/forgot-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=3.1502273, duration(nanos)=3.1502273E9, startTimeNanos=116933701984200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5a06de30'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@54c13b00}
2025-06-27T19:50:47.042+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:50:47.043+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/reset-password] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:50:47.043+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [637494c1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:50:47.043+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:50:47.044+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"5723667a-2626-443e-92ac-b80277257e41", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"142", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:50:47.045+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/reset-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.085E-4, duration(nanos)=108500.0, startTimeNanos=116982344508300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3c1086fb'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@32d77f09} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"5723667a-2626-443e-92ac-b80277257e41", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"142", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:50:47.181+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:50:47.182+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/reset-password'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.137261, duration(nanos)=1.37261E8, startTimeNanos=116982344508300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3c1086fb'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@32d77f09}
2025-06-27T19:50:58.149+07:00 DEBUG 20436 --- [api-gateway] [parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T19:50:58.150+07:00 DEBUG 20436 --- [api-gateway] [parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:50:58.150+07:00 DEBUG 20436 --- [api-gateway] [parallel-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [138d0cd3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:50:58.150+07:00 DEBUG 20436 --- [api-gateway] [parallel-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:50:58.151+07:00 DEBUG 20436 --- [api-gateway] [parallel-12] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"f27d6aa4-8a94-461a-8d20-3f241374b561", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"68", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:50:58.151+07:00 DEBUG 20436 --- [api-gateway] [parallel-12] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=9.65E-5, duration(nanos)=96500.0, startTimeNanos=116993450902900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1dd63324'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@1311deee} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"f27d6aa4-8a94-461a-8d20-3f241374b561", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"68", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:50:58.295+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:50:58.295+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-4] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.1441848, duration(nanos)=1.441848E8, startTimeNanos=116993450902900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@1dd63324'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@1311deee}
2025-06-27T19:51:32.583+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T19:51:32.584+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload/] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:51:32.584+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [35dfa01] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:51:32.584+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:51:32.584+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"8a431937-6983-4fc1-a631-710d49b16b0a", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:51:32.586+07:00 DEBUG 20436 --- [api-gateway] [parallel-1] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.83E-5, duration(nanos)=88300.0, startTimeNanos=117027884977800}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2c2ffb82'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@65c23762} created for the request. New headers are [user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"8a431937-6983-4fc1-a631-710d49b16b0a", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:51:32.814+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:51:32.814+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.2293607, duration(nanos)=2.293607E8, startTimeNanos=117027884977800}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2c2ffb82'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@65c23762}
2025-06-27T19:51:39.829+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T19:51:39.829+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload/] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T19:51:39.829+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [4573b48b] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T19:51:39.829+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T19:51:39.830+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjIzOGEzZjc2LTM0MjktNDk4OS04MTg4LTNkMjJiZWE3YzVkZiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjg2NTgsImV4cCI6MTc1MTAyOTU1OH0.EYK7bGSpQWPZihIT7OZbhp0VgqMh4UMDealxQuwj9Qrw75Me3VrlmdqsLmZ9cMJY8bPO6YWKWCELvCbUt5V5I6OjPNcXlsx096s5J9P2qbfP1SIWOADOgIC2G57E9etTygFOiUBW5EGkRg6VUXSab1EpZRi0cqDeuvQfkZfaeisVAKrmPoQ2yAmhCPQT7JaIkJhG-Rp6jyH39QpWsgPXsnELXW6RBAtVL2PcIQDPJMhqrKuT_19EH4ccvpZKAmXvOV4TlUcGuUDx0D_n2rAIHHZ1ljiCKPP2vN0GWGud4ulU6jKA--kRilZo-V9yOUBvgg3rArHFu6ml3uuOLhS-1w", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"ec3a5b29-bda7-4bc5-850e-0f57ed86fed7", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:51:39.830+07:00 DEBUG 20436 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=8.06E-5, duration(nanos)=80600.0, startTimeNanos=117035129881300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3744bd7a'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3d41d2d2} created for the request. New headers are [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjIzOGEzZjc2LTM0MjktNDk4OS04MTg4LTNkMjJiZWE3YzVkZiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjg2NTgsImV4cCI6MTc1MTAyOTU1OH0.EYK7bGSpQWPZihIT7OZbhp0VgqMh4UMDealxQuwj9Qrw75Me3VrlmdqsLmZ9cMJY8bPO6YWKWCELvCbUt5V5I6OjPNcXlsx096s5J9P2qbfP1SIWOADOgIC2G57E9etTygFOiUBW5EGkRg6VUXSab1EpZRi0cqDeuvQfkZfaeisVAKrmPoQ2yAmhCPQT7JaIkJhG-Rp6jyH39QpWsgPXsnELXW6RBAtVL2PcIQDPJMhqrKuT_19EH4ccvpZKAmXvOV4TlUcGuUDx0D_n2rAIHHZ1ljiCKPP2vN0GWGud4ulU6jKA--kRilZo-V9yOUBvgg3rArHFu6ml3uuOLhS-1w", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"ec3a5b29-bda7-4bc5-850e-0f57ed86fed7", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:55950"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T19:51:40.507+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T19:51:40.508+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-5] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.6774035, duration(nanos)=6.774035E8, startTimeNanos=117035129881300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@3744bd7a'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3d41d2d2}
2025-06-27T20:19:37.253+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T20:19:37.257+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload/] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:19:37.257+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [58ff486a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T20:19:37.258+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T20:19:37.261+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjIzOGEzZjc2LTM0MjktNDk4OS04MTg4LTNkMjJiZWE3YzVkZiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjg2NTgsImV4cCI6MTc1MTAyOTU1OH0.EYK7bGSpQWPZihIT7OZbhp0VgqMh4UMDealxQuwj9Qrw75Me3VrlmdqsLmZ9cMJY8bPO6YWKWCELvCbUt5V5I6OjPNcXlsx096s5J9P2qbfP1SIWOADOgIC2G57E9etTygFOiUBW5EGkRg6VUXSab1EpZRi0cqDeuvQfkZfaeisVAKrmPoQ2yAmhCPQT7JaIkJhG-Rp6jyH39QpWsgPXsnELXW6RBAtVL2PcIQDPJMhqrKuT_19EH4ccvpZKAmXvOV4TlUcGuUDx0D_n2rAIHHZ1ljiCKPP2vN0GWGud4ulU6jKA--kRilZo-V9yOUBvgg3rArHFu6ml3uuOLhS-1w", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"cd7a63d2-9381-42ba-9288-f6423756cd6e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:57997"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:19:37.262+07:00 DEBUG 20436 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=3.102E-4, duration(nanos)=310200.0, startTimeNanos=118712561126600}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2f1c4820'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@23fab3d9} created for the request. New headers are [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjIzOGEzZjc2LTM0MjktNDk4OS04MTg4LTNkMjJiZWE3YzVkZiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjg2NTgsImV4cCI6MTc1MTAyOTU1OH0.EYK7bGSpQWPZihIT7OZbhp0VgqMh4UMDealxQuwj9Qrw75Me3VrlmdqsLmZ9cMJY8bPO6YWKWCELvCbUt5V5I6OjPNcXlsx096s5J9P2qbfP1SIWOADOgIC2G57E9etTygFOiUBW5EGkRg6VUXSab1EpZRi0cqDeuvQfkZfaeisVAKrmPoQ2yAmhCPQT7JaIkJhG-Rp6jyH39QpWsgPXsnELXW6RBAtVL2PcIQDPJMhqrKuT_19EH4ccvpZKAmXvOV4TlUcGuUDx0D_n2rAIHHZ1ljiCKPP2vN0GWGud4ulU6jKA--kRilZo-V9yOUBvgg3rArHFu6ml3uuOLhS-1w", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"cd7a63d2-9381-42ba-9288-f6423756cd6e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:57997"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:19:37.355+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-6] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T20:19:37.355+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-6] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0938134, duration(nanos)=9.38134E7, startTimeNanos=118712561126600}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@2f1c4820'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@23fab3d9}
2025-06-27T20:19:41.569+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T20:19:41.569+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:19:41.569+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [601a0f23] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T20:19:41.569+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T20:19:41.570+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"64db4acb-576d-4870-a056-207fe3158c4a", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"68", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:57997"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:19:41.570+07:00 DEBUG 20436 --- [api-gateway] [parallel-4] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.03E-5, duration(nanos)=50300.0, startTimeNanos=118716870056800}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5d6d8dd5'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@186f081c} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"64db4acb-576d-4870-a056-207fe3158c4a", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"68", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:57997"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:19:41.696+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T20:19:41.696+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-7] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.1266375, duration(nanos)=1.266375E8, startTimeNanos=118716870056800}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5d6d8dd5'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@186f081c}
2025-06-27T20:19:49.918+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T20:19:49.918+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload/] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:19:49.918+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [4a2d378] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T20:19:49.918+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T20:19:49.919+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImM1OGNmOTMwLWJiYTUtNGUyNi1iYzI0LTgyYTliNjc5NGIzYyJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzAzODEsImV4cCI6MTc1MTAzMTI4MX0.ixj26BMGr6vx0NVlbB8YVqm9onsyQJOzDXXf2kjSCzGgIrMLurLyAK_tjqMY0pTNkAOVW9racbEZOfrGlwMjUEwAsy-teTw0RWMxrwFcsXM29jrrfmcXNUM7aLoZPPx9wO695IxLV5AadH5nstopTXnropklApap87XT2V7lBneDKKcpWlbGs57Do6eA7MYYFZOD83htWYJPXovxqeek_GZv4WSlQqeyhb4l0pc1vH7WtOl4AWLjku6lhGCyiTJn3Ns6-6DOe7ktUkk_YCHd5EFn_Ncg6RdkjFPz5LIOR-UsVFx2u5V4cYVyoZSkOrQ-E0c8ZCh94AWe51bZ_ADtyw", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"a6d3c3b0-2144-457c-aafb-d60d0cba8220", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:57997"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:19:49.919+07:00 DEBUG 20436 --- [api-gateway] [parallel-5] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=4.5E-5, duration(nanos)=45000.0, startTimeNanos=118725218755500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@73f6f5cb'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@36f465d1} created for the request. New headers are [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImM1OGNmOTMwLWJiYTUtNGUyNi1iYzI0LTgyYTliNjc5NGIzYyJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzAzODEsImV4cCI6MTc1MTAzMTI4MX0.ixj26BMGr6vx0NVlbB8YVqm9onsyQJOzDXXf2kjSCzGgIrMLurLyAK_tjqMY0pTNkAOVW9racbEZOfrGlwMjUEwAsy-teTw0RWMxrwFcsXM29jrrfmcXNUM7aLoZPPx9wO695IxLV5AadH5nstopTXnropklApap87XT2V7lBneDKKcpWlbGs57Do6eA7MYYFZOD83htWYJPXovxqeek_GZv4WSlQqeyhb4l0pc1vH7WtOl4AWLjku6lhGCyiTJn3Ns6-6DOe7ktUkk_YCHd5EFn_Ncg6RdkjFPz5LIOR-UsVFx2u5V4cYVyoZSkOrQ-E0c8ZCh94AWe51bZ_ADtyw", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"a6d3c3b0-2144-457c-aafb-d60d0cba8220", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:57997"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:19:49.946+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-6] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T20:19:49.946+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-6] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload/'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0276742, duration(nanos)=2.76742E7, startTimeNanos=118725218755500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@73f6f5cb'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@36f465d1}
2025-06-27T20:19:55.246+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T20:19:55.246+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:19:55.246+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [7b083e69] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T20:19:55.246+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T20:19:55.247+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImM1OGNmOTMwLWJiYTUtNGUyNi1iYzI0LTgyYTliNjc5NGIzYyJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzAzODEsImV4cCI6MTc1MTAzMTI4MX0.ixj26BMGr6vx0NVlbB8YVqm9onsyQJOzDXXf2kjSCzGgIrMLurLyAK_tjqMY0pTNkAOVW9racbEZOfrGlwMjUEwAsy-teTw0RWMxrwFcsXM29jrrfmcXNUM7aLoZPPx9wO695IxLV5AadH5nstopTXnropklApap87XT2V7lBneDKKcpWlbGs57Do6eA7MYYFZOD83htWYJPXovxqeek_GZv4WSlQqeyhb4l0pc1vH7WtOl4AWLjku6lhGCyiTJn3Ns6-6DOe7ktUkk_YCHd5EFn_Ncg6RdkjFPz5LIOR-UsVFx2u5V4cYVyoZSkOrQ-E0c8ZCh94AWe51bZ_ADtyw", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c5d6d390-473f-4079-92b5-bd36a04a0c3e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58074"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:19:55.247+07:00 DEBUG 20436 --- [api-gateway] [parallel-6] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=4.05E-5, duration(nanos)=40500.0, startTimeNanos=118730546965300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@d959da6'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@69724493} created for the request. New headers are [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImM1OGNmOTMwLWJiYTUtNGUyNi1iYzI0LTgyYTliNjc5NGIzYyJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzAzODEsImV4cCI6MTc1MTAzMTI4MX0.ixj26BMGr6vx0NVlbB8YVqm9onsyQJOzDXXf2kjSCzGgIrMLurLyAK_tjqMY0pTNkAOVW9racbEZOfrGlwMjUEwAsy-teTw0RWMxrwFcsXM29jrrfmcXNUM7aLoZPPx9wO695IxLV5AadH5nstopTXnropklApap87XT2V7lBneDKKcpWlbGs57Do6eA7MYYFZOD83htWYJPXovxqeek_GZv4WSlQqeyhb4l0pc1vH7WtOl4AWLjku6lhGCyiTJn3Ns6-6DOe7ktUkk_YCHd5EFn_Ncg6RdkjFPz5LIOR-UsVFx2u5V4cYVyoZSkOrQ-E0c8ZCh94AWe51bZ_ADtyw", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c5d6d390-473f-4079-92b5-bd36a04a0c3e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"0", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58074"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:19:55.276+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-8] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T20:19:55.276+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-8] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0290165, duration(nanos)=2.90165E7, startTimeNanos=118730546965300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@d959da6'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@69724493}
2025-06-27T20:20:37.232+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T20:20:37.232+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:20:37.232+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [20f55b5f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T20:20:37.232+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T20:20:37.233+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjRhOTBmYWVjLTBlYjctNGY5MS05ZGNkLTI3N2MwOWFkNzIwNiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjEzNzEsImV4cCI6MTc1MTAyMjI3MX0.J77QdQ2yfb4yn7SINHHtQU672b27twy2zntpPpw6oquIFC1eUwajGRogygRnEcIDZMsO3XPoA0Mzk2L_iV11lFvpbkzksjtsxzMWQFis27tKG7cETd24el6c4cKfCW9eaTZXML83SEuXkziUgOnndGWN9yJOH4ozebWYgPVoqYVMHWGctCouPkHTHXMNYT9MSJNfKwEdF4Orm2LANfCaPC-P_n0O1_-GgANezMyKnSIDlpkJAeLwRGqw83tJFYmHYgnoj4LdbzsIEy1FW5IYwfKA7UHn0pNiMFZ6r8Qpqsy2KsxSZ4yjEcTUeDkiBDlWhSatNtKGfbgnXKlFSS9pdg", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"4f82a772-1005-48a0-9dcf-dd98027cff2f", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------830455813963954132388721", content-length:"1039139", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58141"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:20:37.233+07:00 DEBUG 20436 --- [api-gateway] [parallel-7] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=4.33E-5, duration(nanos)=43300.0, startTimeNanos=118772532804400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5a561991'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@1f548cbf} created for the request. New headers are [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjRhOTBmYWVjLTBlYjctNGY5MS05ZGNkLTI3N2MwOWFkNzIwNiJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMjEzNzEsImV4cCI6MTc1MTAyMjI3MX0.J77QdQ2yfb4yn7SINHHtQU672b27twy2zntpPpw6oquIFC1eUwajGRogygRnEcIDZMsO3XPoA0Mzk2L_iV11lFvpbkzksjtsxzMWQFis27tKG7cETd24el6c4cKfCW9eaTZXML83SEuXkziUgOnndGWN9yJOH4ozebWYgPVoqYVMHWGctCouPkHTHXMNYT9MSJNfKwEdF4Orm2LANfCaPC-P_n0O1_-GgANezMyKnSIDlpkJAeLwRGqw83tJFYmHYgnoj4LdbzsIEy1FW5IYwfKA7UHn0pNiMFZ6r8Qpqsy2KsxSZ4yjEcTUeDkiBDlWhSatNtKGfbgnXKlFSS9pdg", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"4f82a772-1005-48a0-9dcf-dd98027cff2f", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------830455813963954132388721", content-length:"1039139", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58141"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:20:37.254+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T20:20:37.255+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0217287, duration(nanos)=2.17287E7, startTimeNanos=118772532804400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@5a561991'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@1f548cbf}
2025-06-27T20:20:54.025+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T20:20:54.025+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:20:54.025+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [6eddfd50] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T20:20:54.026+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T20:20:54.026+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImM1OGNmOTMwLWJiYTUtNGUyNi1iYzI0LTgyYTliNjc5NGIzYyJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzAzODEsImV4cCI6MTc1MTAzMTI4MX0.ixj26BMGr6vx0NVlbB8YVqm9onsyQJOzDXXf2kjSCzGgIrMLurLyAK_tjqMY0pTNkAOVW9racbEZOfrGlwMjUEwAsy-teTw0RWMxrwFcsXM29jrrfmcXNUM7aLoZPPx9wO695IxLV5AadH5nstopTXnropklApap87XT2V7lBneDKKcpWlbGs57Do6eA7MYYFZOD83htWYJPXovxqeek_GZv4WSlQqeyhb4l0pc1vH7WtOl4AWLjku6lhGCyiTJn3Ns6-6DOe7ktUkk_YCHd5EFn_Ncg6RdkjFPz5LIOR-UsVFx2u5V4cYVyoZSkOrQ-E0c8ZCh94AWe51bZ_ADtyw", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"6425e5dc-2ae7-4e63-8080-cea1831b435e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------073293627512336065976592", content-length:"1039139", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58141"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:20:54.026+07:00 DEBUG 20436 --- [api-gateway] [parallel-8] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.88E-5, duration(nanos)=58800.0, startTimeNanos=118789326515400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@46e1ed0c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3e36bb4} created for the request. New headers are [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImM1OGNmOTMwLWJiYTUtNGUyNi1iYzI0LTgyYTliNjc5NGIzYyJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzAzODEsImV4cCI6MTc1MTAzMTI4MX0.ixj26BMGr6vx0NVlbB8YVqm9onsyQJOzDXXf2kjSCzGgIrMLurLyAK_tjqMY0pTNkAOVW9racbEZOfrGlwMjUEwAsy-teTw0RWMxrwFcsXM29jrrfmcXNUM7aLoZPPx9wO695IxLV5AadH5nstopTXnropklApap87XT2V7lBneDKKcpWlbGs57Do6eA7MYYFZOD83htWYJPXovxqeek_GZv4WSlQqeyhb4l0pc1vH7WtOl4AWLjku6lhGCyiTJn3Ns6-6DOe7ktUkk_YCHd5EFn_Ncg6RdkjFPz5LIOR-UsVFx2u5V4cYVyoZSkOrQ-E0c8ZCh94AWe51bZ_ADtyw", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"6425e5dc-2ae7-4e63-8080-cea1831b435e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------073293627512336065976592", content-length:"1039139", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58141"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:20:54.377+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T20:20:54.377+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.3508416, duration(nanos)=3.508416E8, startTimeNanos=118789326515400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@46e1ed0c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@3e36bb4}
2025-06-27T20:21:45.163+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T20:21:45.163+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:21:45.163+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [a653d9c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T20:21:45.164+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T20:21:45.164+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"81bac7a9-051a-4183-b9f6-2342ea31eb1d", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------305374130680327731789241", content-length:"1039139", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58141"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:21:45.164+07:00 DEBUG 20436 --- [api-gateway] [parallel-9] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=3.89E-5, duration(nanos)=38900.0, startTimeNanos=118840464353300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4e11b44c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@b1323ea} created for the request. New headers are [user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"81bac7a9-051a-4183-b9f6-2342ea31eb1d", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------305374130680327731789241", content-length:"1039139", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58141"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:21:45.172+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-9] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T20:21:45.173+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-9] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.008254, duration(nanos)=8254000.0, startTimeNanos=118840464353300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4e11b44c'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@b1323ea}
2025-06-27T20:21:49.674+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T20:21:49.674+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/files/upload] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:21:49.674+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [32670158] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T20:21:49.675+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T20:21:49.675+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImM1OGNmOTMwLWJiYTUtNGUyNi1iYzI0LTgyYTliNjc5NGIzYyJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzAzODEsImV4cCI6MTc1MTAzMTI4MX0.ixj26BMGr6vx0NVlbB8YVqm9onsyQJOzDXXf2kjSCzGgIrMLurLyAK_tjqMY0pTNkAOVW9racbEZOfrGlwMjUEwAsy-teTw0RWMxrwFcsXM29jrrfmcXNUM7aLoZPPx9wO695IxLV5AadH5nstopTXnropklApap87XT2V7lBneDKKcpWlbGs57Do6eA7MYYFZOD83htWYJPXovxqeek_GZv4WSlQqeyhb4l0pc1vH7WtOl4AWLjku6lhGCyiTJn3Ns6-6DOe7ktUkk_YCHd5EFn_Ncg6RdkjFPz5LIOR-UsVFx2u5V4cYVyoZSkOrQ-E0c8ZCh94AWe51bZ_ADtyw", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c1a0e13e-3229-4c63-b755-90febb47d6d2", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------786680809344892860301584", content-length:"1039139", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58141"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:21:49.675+07:00 DEBUG 20436 --- [api-gateway] [parallel-10] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=3.99E-5, duration(nanos)=39900.0, startTimeNanos=118844975168000}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@50feb540'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@15fc313b} created for the request. New headers are [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImM1OGNmOTMwLWJiYTUtNGUyNi1iYzI0LTgyYTliNjc5NGIzYyJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzAzODEsImV4cCI6MTc1MTAzMTI4MX0.ixj26BMGr6vx0NVlbB8YVqm9onsyQJOzDXXf2kjSCzGgIrMLurLyAK_tjqMY0pTNkAOVW9racbEZOfrGlwMjUEwAsy-teTw0RWMxrwFcsXM29jrrfmcXNUM7aLoZPPx9wO695IxLV5AadH5nstopTXnropklApap87XT2V7lBneDKKcpWlbGs57Do6eA7MYYFZOD83htWYJPXovxqeek_GZv4WSlQqeyhb4l0pc1vH7WtOl4AWLjku6lhGCyiTJn3Ns6-6DOe7ktUkk_YCHd5EFn_Ncg6RdkjFPz5LIOR-UsVFx2u5V4cYVyoZSkOrQ-E0c8ZCh94AWe51bZ_ADtyw", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c1a0e13e-3229-4c63-b755-90febb47d6d2", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-type:"multipart/form-data; boundary=--------------------------786680809344892860301584", content-length:"1039139", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58141"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:21:49.752+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-10] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T20:21:49.752+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-10] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/upload'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0761725, duration(nanos)=7.61725E7, startTimeNanos=118844975168000}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@50feb540'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@15fc313b}
2025-06-27T20:22:39.577+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T20:22:39.577+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8080/api/v1/files/abc04f6d-896e-4366-bb2c-a2ae65268976.pdf] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:22:39.577+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [5b185123] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@eedeb4e
2025-06-27T20:22:39.577+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@e895e3e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@35cbeb54}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6802d023}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@e7d0db2}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@6b4fd7d}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@77476fcf}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@7404aff2}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@4a41caed}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@614cd187}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@70805849}, order = 2147483647]]
2025-06-27T20:22:39.577+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImM1OGNmOTMwLWJiYTUtNGUyNi1iYzI0LTgyYTliNjc5NGIzYyJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzAzODEsImV4cCI6MTc1MTAzMTI4MX0.ixj26BMGr6vx0NVlbB8YVqm9onsyQJOzDXXf2kjSCzGgIrMLurLyAK_tjqMY0pTNkAOVW9racbEZOfrGlwMjUEwAsy-teTw0RWMxrwFcsXM29jrrfmcXNUM7aLoZPPx9wO695IxLV5AadH5nstopTXnropklApap87XT2V7lBneDKKcpWlbGs57Do6eA7MYYFZOD83htWYJPXovxqeek_GZv4WSlQqeyhb4l0pc1vH7WtOl4AWLjku6lhGCyiTJn3Ns6-6DOe7ktUkk_YCHd5EFn_Ncg6RdkjFPz5LIOR-UsVFx2u5V4cYVyoZSkOrQ-E0c8ZCh94AWe51bZ_ADtyw", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"3a10713f-aee2-49ab-938c-659016991e91", host:"localhost:8080", accept-encoding:"gzip, deflate, br", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58141"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:22:39.579+07:00 DEBUG 20436 --- [api-gateway] [parallel-11] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/abc04f6d-896e-4366-bb2c-a2ae65268976.pdf'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=5.14E-5, duration(nanos)=51400.0, startTimeNanos=118894877845500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4b7512ea'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@425303ba} created for the request. New headers are [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImM1OGNmOTMwLWJiYTUtNGUyNi1iYzI0LTgyYTliNjc5NGIzYyJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzAzODEsImV4cCI6MTc1MTAzMTI4MX0.ixj26BMGr6vx0NVlbB8YVqm9onsyQJOzDXXf2kjSCzGgIrMLurLyAK_tjqMY0pTNkAOVW9racbEZOfrGlwMjUEwAsy-teTw0RWMxrwFcsXM29jrrfmcXNUM7aLoZPPx9wO695IxLV5AadH5nstopTXnropklApap87XT2V7lBneDKKcpWlbGs57Do6eA7MYYFZOD83htWYJPXovxqeek_GZv4WSlQqeyhb4l0pc1vH7WtOl4AWLjku6lhGCyiTJn3Ns6-6DOe7ktUkk_YCHd5EFn_Ncg6RdkjFPz5LIOR-UsVFx2u5V4cYVyoZSkOrQ-E0c8ZCh94AWe51bZ_ADtyw", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"3a10713f-aee2-49ab-938c-659016991e91", host:"localhost:8080", accept-encoding:"gzip, deflate, br", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:58141"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:22:39.604+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-10] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T20:22:39.605+07:00 DEBUG 20436 --- [api-gateway] [reactor-http-nio-10] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/abc04f6d-896e-4366-bb2c-a2ae65268976.pdf'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0259677, duration(nanos)=2.59677E7, startTimeNanos=118894877845500}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4b7512ea'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@425303ba}
2025-06-27T20:36:16.092+07:00  INFO 25624 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.12 with PID 25624 (C:\Users\-MSI-\IdeaProjects\Library-Project\api-gateway\target\classes started by -MSI- in C:\Users\-MSI-\IdeaProjects\Library-Project)
2025-06-27T20:36:16.094+07:00 DEBUG 25624 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T20:36:16.095+07:00  INFO 25624 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T20:36:17.067+07:00  INFO 25624 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T20:36:17.070+07:00  INFO 25624 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T20:36:17.105+07:00  INFO 25624 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
2025-06-27T20:36:17.316+07:00  INFO 25624 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=327dc91a-a544-324d-805a-cd78b0f95b8e
2025-06-27T20:36:17.594+07:00  INFO 25624 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T20:36:17.604+07:00  INFO 25624 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T20:36:17.604+07:00  INFO 25624 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T20:36:18.036+07:00  INFO 25624 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: 64a6763d-f0b9-42f1-9908-89cca96f3e19

2025-06-27T20:36:18.899+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T20:36:18.969+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T20:36:18.969+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T20:36:18.969+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T20:36:18.970+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T20:36:18.970+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T20:36:18.970+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T20:36:18.970+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T20:36:18.970+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T20:36:18.970+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T20:36:18.970+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T20:36:18.970+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T20:36:18.970+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T20:36:18.970+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T20:36:18.970+07:00  INFO 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T20:36:19.285+07:00  INFO 25624 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T20:36:19.533+07:00  INFO 25624 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-27T20:36:19.810+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T20:36:19.823+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T20:36:19.826+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T20:36:19.836+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T20:36:19.836+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T20:36:19.837+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T20:36:19.838+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T20:36:19.839+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T20:36:19.839+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T20:36:19.839+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthentication
2025-06-27T20:36:19.841+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T20:36:19.841+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books, _genkey_1=/api/v1/books/search, _genkey_2=/api/v1/books/popular, _genkey_3=/api/v1/books/{id}, _genkey_4=/api/v1/books/isbn/{isbn}} to Path
2025-06-27T20:36:19.842+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T20:36:19.843+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T20:36:19.843+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T20:36:19.843+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T20:36:19.844+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T20:36:19.844+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T20:36:19.844+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T20:36:19.845+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T20:36:19.845+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T20:36:19.845+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T20:36:19.846+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T20:36:19.846+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T20:36:19.847+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthentication
2025-06-27T20:36:19.847+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T20:36:19.847+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T20:36:19.848+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T20:36:19.848+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthentication
2025-06-27T20:36:19.849+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T20:36:19.852+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T20:36:19.853+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T20:36:19.854+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthentication
2025-06-27T20:36:19.854+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T20:36:19.859+07:00 DEBUG 25624 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T20:36:19.861+07:00  INFO 25624 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 4.547 seconds (process running for 5.011)
2025-06-27T20:44:36.915+07:00  INFO 2196 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Starting ApiGatewayApplication using Java 17.0.12 with PID 2196 (C:\Users\-MSI-\IdeaProjects\Library-Project\api-gateway\target\classes started by -MSI- in C:\Users\-MSI-\IdeaProjects\Library-Project)
2025-06-27T20:44:36.918+07:00 DEBUG 2196 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-27T20:44:36.919+07:00  INFO 2196 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : No active profile set, falling back to 1 default profile: "default"
2025-06-27T20:44:37.871+07:00  INFO 2196 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-27T20:44:37.874+07:00  INFO 2196 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-27T20:44:37.903+07:00  INFO 2196 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
2025-06-27T20:44:38.079+07:00  INFO 2196 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=6eda0de5-c758-30f0-87dc-a231ea499816
2025-06-27T20:44:38.320+07:00  INFO 2196 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-27T20:44:38.331+07:00  INFO 2196 --- [api-gateway] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T20:44:38.332+07:00  INFO 2196 --- [api-gateway] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-27T20:44:38.723+07:00  INFO 2196 --- [api-gateway] [main] ctiveUserDetailsServiceAutoConfiguration : 

Using generated security password: b905845b-5e59-4262-8551-88fdff5ea103

2025-06-27T20:44:39.705+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-login', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/login}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-register', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/register}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='RequestRateLimiter', args={redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='auth-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/auth/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='catalog-books-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/books/public/**}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-categories-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-authors-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-publishers-public', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}}}, PredicateDefinition{name='Method', args={_genkey_0=GET}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='catalog-admin', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/admin/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='file-upload', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/upload}}, PredicateDefinition{name='Method', args={_genkey_0=POST}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}, FilterDefinition{name='RequestSize', args={maxSize=500MB}}], uri=http://localhost:8083, order=0, metadata={}}, RouteDefinition{id='file-service-general', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/api/v1/files/**}}], filters=[FilterDefinition{name='JwtAuthentication', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-06-27T20:44:39.768+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-06-27T20:44:39.768+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-06-27T20:44:39.768+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-06-27T20:44:39.768+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-06-27T20:44:39.768+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-06-27T20:44:39.768+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-06-27T20:44:39.770+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-06-27T20:44:39.770+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-06-27T20:44:39.770+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-06-27T20:44:39.770+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-06-27T20:44:39.770+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-06-27T20:44:39.770+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-06-27T20:44:39.770+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-06-27T20:44:39.770+07:00  INFO 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-06-27T20:44:40.106+07:00  INFO 2196 --- [api-gateway] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'
2025-06-27T20:44:40.334+07:00  INFO 2196 --- [api-gateway] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-06-27T20:44:40.648+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=/api/v1/auth/login} to Path
2025-06-27T20:44:40.662+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying {_genkey_0=POST} to Method
2025-06-27T20:44:40.665+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-login applying filter {redis-rate-limiter.replenishRate=5, redis-rate-limiter.burstCapacity=10} to RequestRateLimiter
2025-06-27T20:44:40.677+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-login
2025-06-27T20:44:40.678+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=/api/v1/auth/register} to Path
2025-06-27T20:44:40.679+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying {_genkey_0=POST} to Method
2025-06-27T20:44:40.679+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-register applying filter {redis-rate-limiter.replenishRate=2, redis-rate-limiter.burstCapacity=5} to RequestRateLimiter
2025-06-27T20:44:40.681+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-register
2025-06-27T20:44:40.681+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying {_genkey_0=/api/v1/auth/**} to Path
2025-06-27T20:44:40.681+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service-general applying filter {} to JwtAuthentication
2025-06-27T20:44:40.682+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service-general
2025-06-27T20:44:40.683+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=/api/v1/books/public/**} to Path
2025-06-27T20:44:40.685+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-books-public applying {_genkey_0=GET} to Method
2025-06-27T20:44:40.686+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-books-public
2025-06-27T20:44:40.686+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=/api/v1/categories, _genkey_1=/api/v1/categories/active, _genkey_2=/api/v1/categories/root, _genkey_3=/api/v1/categories/{id}} to Path
2025-06-27T20:44:40.687+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-categories-public applying {_genkey_0=GET} to Method
2025-06-27T20:44:40.687+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-categories-public
2025-06-27T20:44:40.687+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=/api/v1/authors, _genkey_1=/api/v1/authors/search, _genkey_2=/api/v1/authors/{id}} to Path
2025-06-27T20:44:40.688+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-authors-public applying {_genkey_0=GET} to Method
2025-06-27T20:44:40.688+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-authors-public
2025-06-27T20:44:40.688+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=/api/v1/publishers, _genkey_1=/api/v1/publishers/{id}} to Path
2025-06-27T20:44:40.689+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-publishers-public applying {_genkey_0=GET} to Method
2025-06-27T20:44:40.689+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-publishers-public
2025-06-27T20:44:40.690+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying {_genkey_0=/api/v1/admin/**} to Path
2025-06-27T20:44:40.691+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition catalog-admin applying filter {} to JwtAuthentication
2025-06-27T20:44:40.691+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: catalog-admin
2025-06-27T20:44:40.691+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=/api/v1/files/upload} to Path
2025-06-27T20:44:40.691+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying {_genkey_0=POST} to Method
2025-06-27T20:44:40.692+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {} to JwtAuthentication
2025-06-27T20:44:40.692+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-upload applying filter {maxSize=500MB} to RequestSize
2025-06-27T20:44:40.697+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-upload
2025-06-27T20:44:40.697+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying {_genkey_0=/api/v1/files/**} to Path
2025-06-27T20:44:40.698+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition file-service-general applying filter {} to JwtAuthentication
2025-06-27T20:44:40.700+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: file-service-general
2025-06-27T20:44:40.706+07:00 DEBUG 2196 --- [api-gateway] [main] o.s.c.g.filter.GatewayMetricsFilter      : New routes count: 10
2025-06-27T20:44:40.708+07:00  INFO 2196 --- [api-gateway] [main] c.library.gateway.ApiGatewayApplication  : Started ApiGatewayApplication in 4.555 seconds (process running for 4.951)
2025-06-27T20:44:47.046+07:00 DEBUG 2196 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T20:44:47.046+07:00 DEBUG 2196 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8080/api/v1/files/abc04f6d-896e-4366-bb2c-a2ae65268976.pdf] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:44:47.047+07:00 DEBUG 2196 --- [api-gateway] [parallel-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [2deef324] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@3a258739
2025-06-27T20:44:47.047+07:00 DEBUG 2196 --- [api-gateway] [parallel-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5a583720}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@2e4d4d22}, order = -2147482648], [GatewayFilterAdapter{delegate=com.library.gateway.filter.GlobalAuthenticationFilter@77cc6a28}, order = -100], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1d556461}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@6f65aa58}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@36d7a68a}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@4ed19b69}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@42dd7d82}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@749f61a3}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@b339a08}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@59a5bb61}, order = 2147483647]]
2025-06-27T20:44:56.136+07:00 DEBUG 2196 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: auth-service
2025-06-27T20:44:56.138+07:00 DEBUG 2196 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: POST http://localhost:8080/api/v1/auth/login] to Route{id='auth-service', uri=http://localhost:8081, order=0, predicate=Paths: [/api/v1/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:44:56.138+07:00 DEBUG 2196 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [69224d3a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@3a258739
2025-06-27T20:44:56.138+07:00 DEBUG 2196 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5a583720}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@2e4d4d22}, order = -2147482648], [GatewayFilterAdapter{delegate=com.library.gateway.filter.GlobalAuthenticationFilter@77cc6a28}, order = -100], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1d556461}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@6f65aa58}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@36d7a68a}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@4ed19b69}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@42dd7d82}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@749f61a3}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@b339a08}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@59a5bb61}, order = 2147483647]]
2025-06-27T20:44:56.158+07:00 DEBUG 2196 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c13ffae8-d997-4819-81ad-7b574cca452e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"68", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59569"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:44:56.165+07:00 DEBUG 2196 --- [api-gateway] [parallel-2] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0016965, duration(nanos)=1696500.0, startTimeNanos=120231463384200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7a8bfe47'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@73a50cb9} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c13ffae8-d997-4819-81ad-7b574cca452e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"68", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59569"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:44:56.722+07:00 DEBUG 2196 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T20:44:56.722+07:00 DEBUG 2196 --- [api-gateway] [reactor-http-nio-2] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-service', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.5593133, duration(nanos)=5.593133E8, startTimeNanos=120231463384200}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7a8bfe47'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@73a50cb9}
2025-06-27T20:45:06.240+07:00 DEBUG 2196 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: file-service
2025-06-27T20:45:06.240+07:00 DEBUG 2196 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8080/api/v1/files/abc04f6d-896e-4366-bb2c-a2ae65268976.pdf] to Route{id='file-service', uri=http://localhost:8083, order=0, predicate=Paths: [/api/v1/files/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-06-27T20:45:06.241+07:00 DEBUG 2196 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [5e08f9e2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@3a258739
2025-06-27T20:45:06.241+07:00 DEBUG 2196 --- [api-gateway] [parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@5a583720}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@2e4d4d22}, order = -2147482648], [GatewayFilterAdapter{delegate=com.library.gateway.filter.GlobalAuthenticationFilter@77cc6a28}, order = -100], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1d556461}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@6f65aa58}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@36d7a68a}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@4ed19b69}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@42dd7d82}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@749f61a3}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@b339a08}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@59a5bb61}, order = 2147483647]]
2025-06-27T20:45:06.243+07:00 DEBUG 2196 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Will instrument the HTTP request headers [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjdkYTViZGUzLWNjNzctNDE1Mi04NGI2LTYzODQ3M2ZjNTQxOSJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzE4OTYsImV4cCI6MTc1MTAzMjc5Nn0.hGj48AIVgSVjrFA0ECf82fl0jV8A7mtKiPJP2Tp2uPgq-nc1PWY3TvtTDzmw1FhTFVIrX4oIy7SWXyMeUq_A_BqTcw2XU0XdtrRklo7z7e08iQrRn-9bh8Zs8o25L3HJISfcs24ABCmLlKruBnrWr8lYlx-476uDl0aFeLwVRxHXNnHRfsB25aWqYK1irMCk2W1OaAvuH4WtxlpzzuqmbHBtMTlQzpDb8ioxMeGiCgXWstI_ZAt5yOh1E2kmL1UzbnZRzki5l6yPf-S8RRpZsyY3A0pIC9m3OtZbtzNwemv7zXXGCGvv4fIS8ghksPoDG4zplvvqTwSbwiEFjKVlPQ", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c026c387-fa70-4017-bb31-48d72788335e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59569"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:45:06.244+07:00 DEBUG 2196 --- [api-gateway] [parallel-3] g.f.h.o.ObservedRequestHttpHeadersFilter : Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/abc04f6d-896e-4366-bb2c-a2ae65268976.pdf'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.37E-4, duration(nanos)=137000.0, startTimeNanos=120241543390900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@58a38278'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5664771c} created for the request. New headers are [authorization:"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjdkYTViZGUzLWNjNzctNDE1Mi04NGI2LTYzODQ3M2ZjNTQxOSJ9.eyJzdWIiOiJ0ZXN0MTExMTEiLCJpYXQiOjE3NTEwMzE4OTYsImV4cCI6MTc1MTAzMjc5Nn0.hGj48AIVgSVjrFA0ECf82fl0jV8A7mtKiPJP2Tp2uPgq-nc1PWY3TvtTDzmw1FhTFVIrX4oIy7SWXyMeUq_A_BqTcw2XU0XdtrRklo7z7e08iQrRn-9bh8Zs8o25L3HJISfcs24ABCmLlKruBnrWr8lYlx-476uDl0aFeLwVRxHXNnHRfsB25aWqYK1irMCk2W1OaAvuH4WtxlpzzuqmbHBtMTlQzpDb8ioxMeGiCgXWstI_ZAt5yOh1E2kmL1UzbnZRzki5l6yPf-S8RRpZsyY3A0pIC9m3OtZbtzNwemv7zXXGCGvv4fIS8ghksPoDG4zplvvqTwSbwiEFjKVlPQ", user-agent:"PostmanRuntime/7.44.1", accept:"*/*", cache-control:"no-cache", postman-token:"c026c387-fa70-4017-bb31-48d72788335e", host:"localhost:8080", accept-encoding:"gzip, deflate, br", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:59569"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-06-27T20:45:06.357+07:00 DEBUG 2196 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : Will instrument the response
2025-06-27T20:45:06.358+07:00 DEBUG 2196 --- [api-gateway] [reactor-http-nio-3] .f.h.o.ObservedResponseHttpHeadersFilter : The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='file-service', spring.cloud.gateway.route.uri='http://localhost:8083'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/v1/files/abc04f6d-896e-4366-bb2c-a2ae65268976.pdf'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.113819, duration(nanos)=1.13819E8, startTimeNanos=120241543390900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@58a38278'], parentObservation=org.springframework.security.web.server.ObservationWebFilterChainDecorator$PhasedObservation@5664771c}
